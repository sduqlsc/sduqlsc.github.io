<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CFZ BLOG</title>
  
  <subtitle>阳之臻泽，芳而翔之</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.cfz521.space/"/>
  <updated>2020-05-28T06:53:48.342Z</updated>
  <id>https://blog.cfz521.space/</id>
  
  <author>
    <name>Mui Young</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>5月发车</title>
    <link href="https://blog.cfz521.space/posts/5e46a0c3.html"/>
    <id>https://blog.cfz521.space/posts/5e46a0c3.html</id>
    <published>2020-05-28T06:26:48.000Z</published>
    <updated>2020-05-28T06:53:48.342Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --><html><head></head><body><p>本月定投发车，合计 780 元。</p><a id="more"></a><h3 id="月定投"><a href="#月定投" class="headerlink" title="月定投"></a>月定投</h3><table><thead><tr><th align="left">NAME</th><th align="right">Amount</th></tr></thead><tbody><tr><td align="left">易方达中证500</td><td align="right">100</td></tr><tr><td align="left">嘉实基本面50</td><td align="right">100</td></tr><tr><td align="left">工银瑞信金融地产</td><td align="right">100</td></tr><tr><td align="left">华宝香港中小</td><td align="right">70</td></tr><tr><td align="left">中欧医疗健康</td><td align="right">50</td></tr><tr><td align="left">国泰国证食品饮料</td><td align="right">20</td></tr><tr><td align="left">申万菱信沪深300</td><td align="right">110</td></tr><tr><td align="left">易方达恒生</td><td align="right">100</td></tr><tr><td align="left">大成中证红利</td><td align="right">130</td></tr></tbody></table><p><em>备注：稍微调整下份额，原本 50 份额分成两份，一份买入金融地产；基于上涨以及盈利因素，300 减少半份，香港中小减少一部分，恒生继续投入。</em></p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;本月定投发车，合计 780 元。&lt;/p&gt;
    
    </summary>
    
    
      <category term="滴滴" scheme="https://blog.cfz521.space/categories/get-on-bus/"/>
    
    
      <category term="定投" scheme="https://blog.cfz521.space/tags/%E5%AE%9A%E6%8A%95/"/>
    
  </entry>
  
  <entry>
    <title>周总结（5.18~5.24）</title>
    <link href="https://blog.cfz521.space/posts/bb7e9232.html"/>
    <id>https://blog.cfz521.space/posts/bb7e9232.html</id>
    <published>2020-05-24T12:46:50.000Z</published>
    <updated>2020-05-29T08:55:43.543Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --><html><head></head><body><p>入则无法家拂士，出则无敌国外患者，国恒亡。然后知生于忧患，而死于安乐也。</p><a id="more"></a><h3 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h3><p>跑量 <code>30.26km</code>，本周身体感觉还是有些疲惫，连续加班对于身体来说有点过度消耗，表现在运动上就是成绩有起伏，七上八下震荡走势。这其中，5/12 那天跑量为 8km，嗯，就是简单的跑了个路线图。好久没有跑长距离了，脚底板有轻微反应，看来有时间 LSD 走起了。</p><h3 id="理财"><a href="#理财" class="headerlink" title="理财"></a>理财</h3><p>2020 注定是斗争的一年，美帝亡我之心不死，这一周对于一些高科技类企业诸如5G、AI等开始加入“实体清单”，加以制裁；反观这边，两会期间，我兔针对红空（HK）的问题，准备升级安全条例进行约束——<a href="http://news.sina.com.cn/c/2020-05-24/doc-iircuyvi4796001.shtml" target="_blank" rel="noopener external nofollow noreferrer">全国人大为港制定国安法保障香港长期繁荣稳定</a>。对于国内<del>大部分人</del>来说，大概习惯性的想法是支不支持另说，但是要管一下，因为和平的诉求升级成骚乱了，本来支持请愿的，也不愿看到这样，是该管管了；西方认为，不行，这还了得，我曾经住过的地方，还是得按照我的传统来。</p><blockquote><p>胖虎：明天给我带两个肉包子来<br>大雄：胖哥，你的包子<br>（二话不说揍一顿）<br>胖虎：我要六边形的<br>大雄：虎哥，你的包子<br>（二话不说揍一顿）<br>胖虎：我要一个六边形，另一个带闪光的<br>……</p></blockquote><p>这不，恒生指数暴跌，拖累大 A 也跌惨了，洋大人觉得，哎哟，我擦勒，HK 是不是要出事情，脚底抹油赶紧开溜。托福，AH溢价来到了 <code>127.56</code>。另外，由于大放水，但是央行并未如期进行降息操作，债券基金出现小幅度回调，这个需要短期忍耐，毕竟大放水初期的肥美阶段已经过去。当然就目前综合各方面来看，要博取未来的高收益，配置股权资产更适合，特别是低位吸入，即移仓债券到股票，承受现阶段随时回调的高风险，换取未来预期的高收益率。<br><img src="https://s1.ax1x.com/2020/05/24/tShi60.png" alt="本周指数一览"></p><p><kbd><a href="https://www.jisilu.cn/data/indicator/" target="_blank" rel="noopener external nofollow noreferrer">A 股全市场温度计</a></kbd> 本周 PB 15.37，PE 24.39。下周情绪上修复不了的话，还得继续回调。</p><p><kbd><a href="https://qieman.com/portfolios/ZH035746/weekly-reports/257a3429666689f5a8c2b305cb881d28" target="_blank" rel="noopener external nofollow noreferrer">且慢组合</a></kbd> 本周五净值 1.2453，上涨 <font color="green">-1.75%</font>。本周周四买入 1200 元，基于市场情绪面上的回调，指数出现较大跌幅，故而加仓。</p><p><kbd>定投组合</kbd> 本周为止本金 76670.88，市值 82676.24，今年来收益率 <font color="green">-3.09%</font>。05/18 跟随长赢卖出标普 500 一份，周五买入证券保险、300、香港中小、中概互联 50、恒生ETF 基金，主要是指数较大回调，补上上月未定投部分。本周题材依旧在科技、消费医疗轮动抱团。</p><p><kbd>网格</kbd> 本周为止本金 10677.04，总市值 10724.83，证券市值截至本周累计盈利 <font color="green">-148.14</font>。传媒 ETF 买入一格，中概互联 卖出一格，买入一格。</p><h3 id="工作太多，加班来凑"><a href="#工作太多，加班来凑" class="headerlink" title="工作太多，加班来凑"></a>工作太多，加班来凑</h3><p>本周我想吐槽一下关于领导的艺术，站得越高，越来越的会说话就会显得越来越重要。就像我自己认为的，与人争执，一句我脾气不好，只是一个给自己找一个原谅自己的借口，一个回避主要问题的圆场。个人的思维模式一旦定型，应答有些事情的话术就容易脱口而出，当然前提是这是好的惯性思维。拿我来说，自打有了小阳总，说话上确实收敛了不少，但是还是很僵硬，不懂得变通，事后常常懊恼为什么不顺着孩子的思维来四两拨千斤达到自己的效果。以退为进，将欲取之，必先予之，很高深的策略，原因嘛，自然在于知易行难。<br>回到我要说的，例行周会上，因为各种工作安排问题，我对成员的时间与当前主要任务优先级提出了质疑。领导来了一句，活干不完，加班啊。尼玛，心里一万头非洲蝗虫从青青草原掠过。这一个月，跟得上我部门加班多的没有了吧，作为领导我觉得这么说不太合适，要来一句“活干不完，加钱”，类似的正式与玩笑掺杂的话语，是不是更好？既能安慰军心，也能把工作顺利交代下去，更显得一个高位人士的修养。</p><p>狗东 618 快到了，没多少要买的东西，无芯卷纸、儿童牙膏等生活必需品需要囤点；其他方面，阳夫人心心念一个扫地机器人，目前稍微调查了一些，在 360 X95 与石头 T7 之前摇摆，感觉都是半斤八两。插播一句，最近钱不够花的，🤐。</p><p>周末去看了看床以及床垫，也算是增加了一点知识面，尤其是床垫方面，席梦思如雷贯耳，丝涟、舒达、金可儿确实不错啊，可惜本地商场高端品牌不是很多。国内，如雅兰、8H、喜临门、顾家、慕思和穗宝等也比较常见。不过其实想重点说的是，喜欢上下两层的儿童床很久了，每每看到，都会羡慕一番，阳夫人原话是“送你四个字，哈哈哈哈”，😔。</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;入则无法家拂士，出则无敌国外患者，国恒亡。然后知生于忧患，而死于安乐也。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>521·8</title>
    <link href="https://blog.cfz521.space/posts/52184ever.html"/>
    <id>https://blog.cfz521.space/posts/52184ever.html</id>
    <published>2020-05-21T03:06:02.000Z</published>
    <updated>2020-05-21T04:17:52.002Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --><html><head></head><body><p>走来窗下笑相扶，爱道画眉深浅入时无？</p><a id="more"></a><p>今天是 5.21，是要写点什么的。毕竟，八周年纪念日，阳夫人从青涩小果子经过岁月也变得蜜桃成熟了。<br>作为一个注重仪式感的人，逢年过节礼物是少不了的，打从用手机开始就设置了节日提醒，从收到提醒的那一刻开始就想着接下来应该要送什么东西。写道这里，又想起了阳夫人曾经在一块手机上的备忘：</p><blockquote><p>明天是老公的生日<br>（24小时后）<br>昨天是老公的生日，我忘了……😳</p></blockquote><p>当时嘲笑了阳夫人许久，现在想来也是嘴角轻轻的斜上扬，觉得很好玩。话说回来，选礼物的过程真是挣着白菜的钱，瞅着白粉的东西，花着白金的心思，左思右想拿不定注意。所谓，送礼要送到心坎上，不过黄晓明曾说“我要我觉得……”，嗯，一直想看阳夫人擦迪奥 999 烈焰红唇装很久了，不过这次还是没下手。纪梵希的小羊皮斩男色看着不错，公主大人，收了我吧，😄。</p><p>正式的活动从昨天早上开始，早起没出门跑步🏃‍之前，对着高德手机地图在马桶🚽上规划起来路线，寻思着划个 521 的路线应该很拉风；有时候想做一件事情，一件微小的事情，但是让你在乎的人觉得是在关心着 TA。男人，有时候为了一点点小小的表扬就会跟闻到腥味的泰迪一样，上蹿下跳。只是大概我是直男思维，Get 不到点，手动黑线中。穿好装备，系好鞋带，拿好手机，打开悦跑圈，一气呵成。跑的过程波澜不惊，唯一就是忘了带帽子。晨起踏祥云，朝阳很美很好，一如恋人们温暖的拥抱，身体暖暖的，8 公里跑完了路线，跑的挺舒服。</p><p><img src="https://s1.ax1x.com/2020/05/21/YHoa9O.jpg" alt="爱你哟.jpg"></p><p>晚上大家<del>正儿八经</del>一起吃了个晚饭，送上我的小羊皮；小炒私房菜，杨梅解暑汤，RIO 忆往昔，你侬我侬陈年酒，低眉小酌回味长。算是完美吧，只是阳夫人有时候给人的感觉不在线，没有表现出特别的情绪，波澜不惊或者情绪上不积极。想来是累了，这两天加班多，阳夫人在家工作完还要出去溜娃。今天早上，阳夫人伤感了一把。感慨工作没成就，哀叹岁月易老人易老，女人对于慢慢变老有种莫名的恐惧，恍惚间，我也不知道该如何安慰。可能由于我的心态问题吧，并没有觉得自己上年纪了就怎么怎么的，虽然身体的信号能感觉到，但是每次运动完感觉自己依旧很健康，有活力，不减当年。话说回来，送礼了这么多年，很少在男人的节日里收到回礼，阳夫人说要不我给你红包。😂，还是免了吧，大概就是自己过分注重场面了吧。</p><p>关于二胎，我一直的想法是想要一个妹妹，小女孩真是可爱至极呀，好打扮也贴心，最重要的是良心大大的有。这不是空口就来，也是有感悟而发，老人有个事情，女儿总是照应的全面，也体贴，也想的周到；儿子嘛，呵呵，都是些没良心的（此处省略 1024 个字）。有时候，想要个公举，希望老了，至少也能照顾一下阳夫人。不过人不能一厢情愿，更不能太自私，毕竟不是个小事情。想来这恐怕对于阳夫人也是一种考验，毕竟年龄摆在那里，身体水平也一般，所以，暂时只能称作是梦想吧。也许是努力的不够吧，没有让她心甘情愿为你生猴子，😘。</p><p>话说，5.21 路线图发了一条朋友圈，配文字“画眉深浅，生书鸳鸯，蓁蓁叶下，联步璧池”，阳夫人的评价是晦涩，😔……</p><blockquote><p>洞房昨夜停红烛，待晓堂前拜舅姑。<br>妆罢低声问夫婿，画眉深浅入时无。 —— 朱庆馀 《近试上张籍水部 / 近试上张水部 / 闺意献张水部》</p><p>凤髻金泥带，龙纹玉掌梳。走来窗下笑相扶，爱道画眉深浅入时无？<br>弄笔偎人久，描花试手初。等闲妨了绣功夫，笑问鸳鸯两字怎生书？—— 欧阳修《南歌子·凤髻金泥带》</p><p>彩軿牛女欢云汉，华屋神仙艳洞天。<br>玉润冰清更奇绝，明年联步璧池边。—— 姚勉《新婚致语》</p><p>桃之夭夭，其叶蓁(zhēn)蓁。之子于归，宜其家人。 ——《诗经·周南·桃夭》</p></blockquote><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;走来窗下笑相扶，爱道画眉深浅入时无？&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="note" scheme="https://blog.cfz521.space/tags/note/"/>
    
  </entry>
  
  <entry>
    <title>周总结（5.11~5.17）</title>
    <link href="https://blog.cfz521.space/posts/42c8f157.html"/>
    <id>https://blog.cfz521.space/posts/42c8f157.html</id>
    <published>2020-05-17T10:51:44.000Z</published>
    <updated>2020-05-17T13:48:38.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --><html><head></head><body><p>内无妄思，外无妄动。</p><a id="more"></a><h3 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h3><p>跑量 <code>27.98km</code>，本周平均配速比上周要慢，也算是有点刻意为之，因为加班多点，所以精力有所不及，适当降低速度，防止受伤。</p><h3 id="理财"><a href="#理财" class="headerlink" title="理财"></a>理财</h3><p>周末美帝亡我之心不死，针对华为及其产业链企业发布了一系列的出口管制条款，简称 5·15 条款。看知乎大神们的分析，大意是说，即使是一把螺丝刀，只要用了美国的技术，都得报备。￥%……&，这真是够无耻和流氓的了，看来逆全球化的趋势开始了。最坏的打算是台积电断供（当然，台积电的求生欲也很强，已经同意在米国投资建设芯片厂，以换取美国技术授权以及华为的订单），以及设计软件 EDA 限制，尤其是软件这方面暂时没有国产替代。我们这边的应对目前明面上的新闻就是国家集成电路基金投资中芯国际，建设 12 英寸晶圆生产线，以满足 14nm 芯片的产能；而 7nm 方面，由于 EUV 光刻机迟迟无法到位的限制，只能用 DUV 生成，相比前者，性能略微差些。反制措施方面，大概高通会是第一个被搞的，在美股已经先跌为敬了。<br>16日华为通过心声社区发文称：</p><blockquote><p>没有伤痕累累，哪来皮糙肉厚，英雄自古多磨难。回头看，崎岖坎坷；向前看，永不言弃。</p></blockquote><p><img src="https://s1.ax1x.com/2020/05/17/YR8jdx.md.jpg" alt="菊❀Can.jpg"><br>国产替代任重道远，也算是一个教训吧 —— <strong>叫醒你次数最多的永远是打得最疼那个，而不是好言相劝、温柔以待的亲朋好友</strong>。所谓理想很丰满，现实啪啪打脸。</p><p><img src="https://s1.ax1x.com/2020/05/17/YR3LUf.png" alt="本周指数一览"></p><p><kbd><a href="https://www.jisilu.cn/data/indicator/" target="_blank" rel="noopener external nofollow noreferrer">A 股全市场温度计</a></kbd> 本周 PB 18.35，PE 26.36。下周看我大 A 是否依旧坚挺，至少本周有点振荡向下的味道，成交意愿不活跃，缩量阴跌的感觉。</p><p><kbd><a href="https://qieman.com/portfolios/ZH035746/weekly-reports/08b56d7800ad2f9cc256af8d37852555" target="_blank" rel="noopener external nofollow noreferrer">且慢组合</a></kbd> 本周五净值 1.2674，上涨 <font color="red">+0.21%</font>。本周周四买入 200 元，许久没操作，暂时发车一次，因为这次有个小回调。</p><p><kbd>定投组合</kbd> 本周为止本金 77001.99，市值 83388.70，今年来收益率 <font color="green">-1.69%</font>。题材依旧在科技、消费医疗轮动，500 表现比较好，开始补涨了一部分；其他像是大金融等的依旧没啥机会。中概股表现不错，狗东要回归上市了，腾讯的财报也比较亮眼，拼多多市值新高。不得不说，黄峥有两把刷子，蒋凡暂时是呵呵了。</p><p><kbd>网格</kbd> 本周为止本金 10677.04，总市值 10906.71，证券市值本周累计盈利 <font color="green">-21.50</font>。传媒 ETF 卖出一格，券商 ETF 买入一格。</p><h3 id="静水流深"><a href="#静水流深" class="headerlink" title="静水流深"></a>静水流深</h3><p>本周工作依旧是有点满负荷，加班多，背部有点受不了。倒是平板支撑，😄，坚持到差不多两分钟了，出出汗挺好。待交付的项目拐了一个小弯，因为两个项目都是甲方的，业主倾向于软硬件统一，所以可能会由自研转向集成。最近这个 GB28181 协议也是把我折腾了一些，总而言之如果对接这个协议，还得自己研发，没有很成熟的开源方案。<br>周六全家打算去拍照的，不过自身觉得身体有点不大想动，勉为其难，结果就是表现在面儿上就是遇到小事有点绷不住情绪——小阳总同志可能是等的时间太长了，情绪上有点不耐烦。公众场合不应该对孩子以及其他人掉面子，讲话以及做事要注意刹车。好在摄影师以及阳夫人逗引的好，小阳算是给面子，汉堡🍔+可乐🥤，好歹把他的部分拍完了。至于我嘛，候场一下午，登台一分钟，😶。<br>开学的日子终于要到了，神兽们终于要回笼了，当然有些学校还是挺贴心的，温馨提醒到切忌迫不及待地表现出喜上眉梢之情，尽量有一定的伤感之情，😂。体温计和口罩成了刚需了，不过比较担心的是低龄孩子容易打碎，毕竟水银也存在一定的安全隐患。赶紧开学吧，最近小阳时不时就表现出无聊的样子，人还是要和心智的玩儿比较有意思。宅家久了，也开始想念小伙伴了；当然有时候孩子情绪不好，也容易带崩大人，做父母真是大大的学问。比如，阳夫人说过出去玩的时候，碰到一个家长，用小阳的评价就是“他超棒”；因为这个家长说话的方式跟分析孩子的心理似的，告诉孩子你的感受，然后跟知心姐姐一样安慰和引导。自叹弗如，继续努力！<br>天气又开始不好了，这会儿开始连着推送冰雹、大风、雷电预警，早下早好，莫等到汛期再来一个大的，伤不起。毕竟处于下游的问题，除了要看老天爷的颜色，还要按上游水库的意志。朋友圈一会儿就看到了天空下雹子的视频，希望各位平安无事。<br>越来越觉得天猫精灵越来越智障了：</p><blockquote><p>天猫精灵，xx 点再提醒我一次<br>……<br>现在是 xx 点，您有一个提醒，内容是 <em>一次</em><br>😓</p></blockquote><p>盼啊盼，《向往的生活》第四季开播了，这算是我们家的保留节目吧，前几年是“跑男”，不过班底散了之后，不好看了。而“往生”挺可以的，轻松、简单，却让人觉得向往而又放松。某次在超市看到了小时候和爷爷赶会时，经常会买的薄荷糖🍬，忍不住回忆了一波：</p><p><img src="https://s1.ax1x.com/2020/05/17/YR080g.md.jpg" alt="薄荷"></p><p>日子总会是越来越好的，顺势而为！</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;内无妄思，外无妄动。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>奇怪的知识--化学的计算机描述</title>
    <link href="https://blog.cfz521.space/posts/9c80c10f.html"/>
    <id>https://blog.cfz521.space/posts/9c80c10f.html</id>
    <published>2020-05-16T02:23:22.000Z</published>
    <updated>2020-05-16T02:38:22.692Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --><html><head></head><body><p>正好在调查危化品这一块的资料，顺手总结一下化学品的一些计算机化的描述。</p><a id="more"></a><h3 id="结构式编辑器"><a href="#结构式编辑器" class="headerlink" title="结构式编辑器"></a>结构式编辑器</h3><ul><li>ketcher</li><li>JSDraw</li><li>JSME</li></ul><p><em>以上都是免费使用的</em></p><h3 id="结构式描述文件"><a href="#结构式描述文件" class="headerlink" title="结构式描述文件"></a>结构式描述文件</h3><ul><li>描述文件 <code>.mol</code> 或者 <code>mol2</code>，可以使用 <code>openbabel</code> 或者 <code>gview</code> 打开后保存 <code>.mol2</code></li><li><code>SDF</code>，结构数据格式文件，用于表示多个化学结构记录和相关数据字段</li><li>化学结构式在计算机系统中采用 <code>SMARTS</code> 或者 <code>SMILES</code> 编码存储</li></ul><blockquote><p><code>SMILES</code> 是一种线性码， 即用 ASCII 字符串明确描述分子结构的规范，可用于存储化学结构式信息。<a href="https://www.chem960.com/cas/123353/" target="_blank" rel="noopener external nofollow noreferrer"><code>chem960</code></a> 中可以查询 SMILES 编码。</p><p><code>SMARTS（SMiles ARbitrary Target Specification）</code> 是一种用于描述分子模式和属性的语言。SMILES 所有的符号和属性在 SMARTS 中同样适用，因此它也是SMILES的延伸。此外，SMARTS 还包括了逻辑操作符和额外的分子描述符</p><p><code>MSDS (Material Safety Data Sheet)</code> 即化学品安全技术说明书，亦可译为化学品安全说明书或化学品安全数据说明书。是化学品生产商和进口商用来阐明化学品的理化特性（如PH值，闪点，易燃度，反应活性等）以及对使用者的健康（如致癌，致畸等）可能产生的危害的一份文件（百度百科）</p></blockquote><h3 id="绘制"><a href="#绘制" class="headerlink" title="绘制"></a>绘制</h3><ul><li><code>RDKit</code></li><li><code>indraw</code></li></ul><h3 id="资料库"><a href="#资料库" class="headerlink" title="资料库"></a>资料库</h3><ul><li><a href="http://bbs.keinsci.com/forum.php" target="_blank" rel="noopener external nofollow noreferrer">计算化学公社</a></li><li><a href="http://muchong.com/" target="_blank" rel="noopener external nofollow noreferrer">小木虫</a></li><li><a href="https://github.com/chembl/chembl_webresource_client" target="_blank" rel="noopener external nofollow noreferrer">ChEMBL</a></li><li><code>scifinder</code></li><li><code>reaxys</code></li><li><a href="https://reference.wolfram.com/language/guide/ChemicalDataFormats.html.zh?source=footer" target="_blank" rel="noopener external nofollow noreferrer">化学和生物分子格式</a></li></ul><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;正好在调查危化品这一块的资料，顺手总结一下化学品的一些计算机化的描述。&lt;/p&gt;
    
    </summary>
    
    
      <category term="教程" scheme="https://blog.cfz521.space/categories/tutorials/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
      <category term="奇怪的知识" scheme="https://blog.cfz521.space/tags/%E5%A5%87%E6%80%AA%E7%9A%84%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>程序猿防 rm 删库的自我修养</title>
    <link href="https://blog.cfz521.space/posts/d572b3c2.html"/>
    <id>https://blog.cfz521.space/posts/d572b3c2.html</id>
    <published>2020-05-13T02:33:29.000Z</published>
    <updated>2020-05-14T00:26:05.939Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>“他走了进来，俯下身子直到吻住她/从她那里，他得到力量。/（女人望着他，全无回应。）/一面氲湿的镜子/模糊地仿效人生。/他收紧领带，/收紧心脏，/喝了一小口散淡浑浊的咖啡，/开始讲解/今天的计划，/昨日的梦想和无法实现的/渴望。/（她安静地注视着他。）/他又开口。回忆起多少日子的/争斗和过去的/爱情。人生真是想不到，/他说。（比词语脆弱得多。）/终于他跟随她的沉默闭了嘴，/贴近她的唇/就这样哭起来，那双唇/已永远不会有回应。” —— 何塞·安赫尔·巴伦特 / 汪天艾</p><a id="more"></a><h3 id="序"><a href="#序" class="headerlink" title="序"></a>序</h3><p>最近看到一则<a href="http://www.enkj.com/idcnews/Article/20200420/18748" target="_blank" rel="noopener external nofollow noreferrer">新闻</a>，说的是负责郑大医院 HIS 系统运维的工程师因为违规操作致使甲方业务系统瘫痪进，合计损失 800万，而被判刑 5年半。加之之前腾讯云微盟“删库跑路”事故，以及更早之前的一些新闻，不禁觉得这也是一种高危工作啊😱。回过头来看郑大医院事件，我觉得运维工程师有一定的背锅成分，刨去整个甲方测算的是估算值不说，而承包方中的项目主管等难道没有什么责任吗？</p><p>回到今天要说的问题，删库从来就是一个危险的举动，轻则业务停摆耗时费力，重则锒铛入狱商业信誉受损。恰好前一段时间也是有童鞋误操作执行命令，导致服务器异常。所以有必要针对 <code>rm -rf</code> 命令进行一些防误操作机制。当然也是着重强调的是，删了重要的文件后，<strong>不要重启系统！</strong><br><img src="https://s1.ax1x.com/2020/05/13/Yaew3q.png" alt="真·删库"></p><h3 id="脚本开启验证"><a href="#脚本开启验证" class="headerlink" title="脚本开启验证"></a>脚本开启验证</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -e <span class="comment">#若指令传回值不等于0，则立即退出shell。这时候可以使用 failOp||nextOp 操作执行下一步命令。</span></span><br><span class="line"><span class="built_in">set</span> -u <span class="comment">#当执行时使用到未定义过的变量，则显示错误信息。</span></span><br><span class="line"><span class="built_in">set</span> -x <span class="comment">#执行指令后，会先显示该指令及所下的参数。</span></span><br></pre></td></tr></tbody></table></figure><p>这样做的目的是能快速发现异常，保证当一些变量比如路径为空时，停止继续执行诸如删除之类的操作。</p><h3 id="轮子"><a href="#轮子" class="headerlink" title="轮子"></a>轮子</h3><h4 id="safe-rm"><a href="#safe-rm" class="headerlink" title="safe-rm"></a>safe-rm</h4><p>替换系统自带的 <code>rm</code>，目前版本停留在 <code>0.12</code>:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://launchpad.net/safe-rm/trunk/0.12/+download/safe-rm-0.12.tar.gz</span><br><span class="line">tar -xzvf safe-rm-0.12.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换系统 rm</span></span><br><span class="line">cp safe-rm-0.12/safe-rm /usr/<span class="built_in">local</span>/bin/rm</span><br><span class="line">chown root:root /usr/<span class="built_in">local</span>/bin/rm</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加配置</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment">#把safe-rm的路径配置在其他的前面</span></span><br><span class="line">PATH=/usr/<span class="built_in">local</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置路径黑名单，如添加 /root/test 目录</span></span><br><span class="line">vim /etc/safe-rm.conf</span><br><span class="line">/root/<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">mkdir /root/<span class="built_in">test</span></span><br><span class="line"><span class="comment">#删除不成功</span></span><br><span class="line">rm -rf /root/<span class="built_in">test</span></span><br></pre></td></tr></tbody></table></figure><div><div class="fold_hider"><div class="close hider_title"><i class="fa fa-plus-square-o" aria-hidden="true"></i> 附常见的需要保护的文件/目录</div></div><div class="fold"><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/</span><br><span class="line">/bin</span><br><span class="line">/boot</span><br><span class="line">/dev</span><br><span class="line">/etc</span><br><span class="line">/home</span><br><span class="line">/initrd</span><br><span class="line">/lib</span><br><span class="line">/proc</span><br><span class="line">/root</span><br><span class="line">/sbin</span><br><span class="line">/sys</span><br><span class="line">/usr</span><br><span class="line">/usr/bin</span><br><span class="line">/usr/include</span><br><span class="line">/usr/lib</span><br><span class="line">/usr/<span class="built_in">local</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin</span><br><span class="line">/usr/<span class="built_in">local</span>/include</span><br><span class="line">/usr/<span class="built_in">local</span>/sbin</span><br><span class="line">/usr/<span class="built_in">local</span>/share</span><br><span class="line">/usr/sbin</span><br><span class="line">/usr/share</span><br><span class="line">/usr/src</span><br><span class="line">/var</span><br><span class="line">/etc/safe-rm.conf</span><br></pre></td></tr></tbody></table></figure></div></div><h4 id="trash-cli"><a href="#trash-cli" class="headerlink" title="trash-cli"></a>trash-cli</h4><p>一个基于命令行的回收站工具，具体使用可以参考 <a href="https://github.com/andreafrancia/trash-cli" target="_blank" rel="noopener external nofollow noreferrer">GitHub</a>。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装，使用 easy_install 或者 pip</span></span><br><span class="line">easy_install trash-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用法</span></span><br><span class="line">trash-put foo.txt foo</span><br><span class="line">trash-list</span><br><span class="line">trash-restore</span><br><span class="line"></span><br><span class="line">trash-empty</span><br><span class="line">trash-empty <days></span><br><span class="line"></span><br><span class="line">trash-rm \*.o</span><br></pre></td></tr></tbody></table></figure><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li><a href="https://github.com/bneijt/autotrash" target="_blank" rel="noopener external nofollow noreferrer">autotrash</a></li><li><a href="https://www.unix.com/man-page/OpenSolaris/1/gvfs-trash/" target="_blank" rel="noopener external nofollow noreferrer">gvfs-trash</a></li></ul><h3 id="alias-rm"><a href="#alias-rm" class="headerlink" title="alias rm"></a>alias rm</h3><p>有不少人刚从 Windows 转向 Linux 时，特别是在命令行界面，都会感叹有一个回收站多好，防止手哆嗦有奇效。这其中桌面版的 Linux 中已经内置回收站功能，一般位于 <code>$HOME/.local/share/Trash</code>。所以基于此，我们延伸出一种思路，<em>创建回收站目录，然后利用脚本代替 <code>rm</code> 将要删除的文件（夹）移动到目录中即可，当然也就可以在脚本中利用定时清空文件夹</em>。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建回收站</span></span><br><span class="line">sudo mkdir -p /.Trash</span><br><span class="line">sudo chmod a+rw /.Trash</span><br><span class="line">sudo chmod +t /.Trash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑用户变量，添加 alias</span></span><br><span class="line">vim ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> rm=moveToRecycle</span><br><span class="line"><span class="built_in">alias</span> rcll=<span class="string">'ls -l /.Trash'</span>  </span><br><span class="line"><span class="built_in">alias</span> unrm=restoreFile</span><br><span class="line"><span class="built_in">alias</span> rcempty=emptyRecycle</span><br><span class="line"></span><br><span class="line"><span class="comment"># 撤销删除文件</span></span><br><span class="line">restoreFile()</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ];</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"input at least one path"</span></span><br><span class="line">      <span class="built_in">exit</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  </span><br><span class="line">  mv -i /.Trash/<span class="variable">$@</span> ./  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动文件到回收站</span></span><br><span class="line">moveToRecycle()</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ];</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"input at least one path"</span></span><br><span class="line">      <span class="built_in">exit</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  mv <span class="variable">$@</span> /.Trash/</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空回收站</span></span><br><span class="line">emptyRecycle()  </span><br><span class="line">{  </span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"Confirm to empty recycle?[n]"</span> confirm  </span><br><span class="line">    [ <span class="variable">$confirm</span> == <span class="string">'y'</span> ] || [ <span class="variable">$confirm</span> == <span class="string">'Y'</span> ]  && /usr/bin/rm -rf /.Trash/*</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></tbody></table></figure><p>OK，经过以上操作，我们可以愉快的使用了：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除一个文件夹，cfz下面的文件均被移到回收站中</span></span><br><span class="line">rm cfz</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除一个文件</span></span><br><span class="line">rm cfz.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#恢复 abc.txt</span></span><br><span class="line">unrm cfz.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#恢复 cfz 件夹</span></span><br><span class="line">unrm cfz</span><br><span class="line"></span><br><span class="line"><span class="comment">#列出回收站</span></span><br><span class="line">rcll</span><br><span class="line"></span><br><span class="line"><span class="comment">#清空回收站</span></span><br><span class="line">rcempty</span><br></pre></td></tr></tbody></table></figure><p>bonus ——定时删除功能：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里注意调用的时系统自带的 rm</span></span><br><span class="line"><span class="comment"># 每日零点自动清理超过 30 天删除的文件</span></span><br><span class="line">0 0 * * * /bin/find ~/.Trash -ctime 30 -name <span class="string">"*"</span> -<span class="built_in">exec</span> /bin/rm -rf {} \;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以写一个脚本放入 crontab</span></span><br><span class="line"><span class="comment"># 自动清理30天删除的文件</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">find ~/.Trash -ctime 30 -<span class="built_in">type</span> f -name <span class="string">"*"</span> -<span class="built_in">exec</span> /bin/rm {} \;</span><br><span class="line"><span class="comment"># 自动清理30天删除的目录</span></span><br><span class="line">find ~/.Trash -ctime 30 -<span class="built_in">type</span> d -name <span class="string">"*"</span> -<span class="built_in">exec</span> /bin/rm {} \;</span><br></pre></td></tr></tbody></table></figure><h3 id="只读、粘滞位、chattr"><a href="#只读、粘滞位、chattr" class="headerlink" title="只读、粘滞位、chattr"></a>只读、粘滞位、chattr</h3><h4 id="根文件挂载成只读"><a href="#根文件挂载成只读" class="headerlink" title="根文件挂载成只读"></a>根文件挂载成只读</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#remount,ro，就表示只读的方式挂载</span></span><br><span class="line">cat /etc/fstab</span><br><span class="line">/dev/root / ext4 remount,ro,noatime 0 1</span><br></pre></td></tr></tbody></table></figure><h5 id="粘滞位（sticky-bit）、chattr"><a href="#粘滞位（sticky-bit）、chattr" class="headerlink" title="粘滞位（sticky bit）、chattr"></a>粘滞位（sticky bit）、chattr</h5><blockquote><p>可以理解为防删除位，主要是为公共目录（例如权限为 777 的）设置，权限字符为 <code>t</code>，粘滞位的权限数字为 <code>1</code>，作用是多用户具有读写权限，但是不能删除该目录中其他用户的文件，只能删自己创建的文件</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 粘滞位针对目录</span></span><br><span class="line">chmod o+t /tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁止文件修改</span></span><br><span class="line">chattr +i /etc/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解除：chattr -i xxx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#日志只能追加</span></span><br><span class="line">chattr +a /var/<span class="built_in">log</span>/nginx.log</span><br></pre></td></tr></tbody></table></figure><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;“他走了进来，俯下身子直到吻住她/从她那里，他得到力量。/（女人望着他，全无回应。）/一面氲湿的镜子/模糊地仿效人生。/他收紧领带，/收紧心脏，/喝了一小口散淡浑浊的咖啡，/开始讲解/今天的计划，/昨日的梦想和无法实现的/渴望。/（她安静地注视着他。）/他又开口。回忆起多少日子的/争斗和过去的/爱情。人生真是想不到，/他说。（比词语脆弱得多。）/终于他跟随她的沉默闭了嘴，/贴近她的唇/就这样哭起来，那双唇/已永远不会有回应。” —— 何塞·安赫尔·巴伦特 / 汪天艾&lt;/p&gt;
    
    </summary>
    
    
      <category term="教程" scheme="https://blog.cfz521.space/categories/tutorials/"/>
    
    
      <category term="Linux" scheme="https://blog.cfz521.space/tags/Linux/"/>
    
      <category term="rm" scheme="https://blog.cfz521.space/tags/rm/"/>
    
  </entry>
  
  <entry>
    <title>周总结（5/4~5/10）</title>
    <link href="https://blog.cfz521.space/posts/da197cc2.html"/>
    <id>https://blog.cfz521.space/posts/da197cc2.html</id>
    <published>2020-05-10T03:18:24.000Z</published>
    <updated>2020-05-10T05:01:19.638Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>臣密言：……臣无祖母，无以至今日；祖母无臣，无以终余年……乌鸟私情，愿乞终养……</p><a id="more"></a><h3 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h3><p>跑量 <code>32.37km</code>，多跑了一次，缘于今天母亲节，以 <code>5.10km</code> 行动表示对天下母亲致敬，祝愿各位母亲、妈妈健康长寿，永远十八🎊！本周表现有点不太满意，心率略高些并且跑起来不长距离就升高了，虽然总体可控，但是逊于上周的指标，有点影响节奏。中间两三次跑步🏃‍过程中，腿部感觉乏力。自我分析了一些，应该是近期加班比较多，晚上休息时间不够，导致腰部不适，进而压迫腿部发酸。夏至已至，天气也开始不稳定起来，时而闷热，时而阴雨绵绵，尤其是这两天一直在下雨。下雨天，睡觉天，平常要多休息了。某天睡了九个小时，可是深睡眠时间不是太多，所以应该是白天累了点。</p><p><img src="https://s1.ax1x.com/2020/05/10/Y1zGMF.jpg" alt="动起来.jpg"></p><h3 id="理财"><a href="#理财" class="headerlink" title="理财"></a>理财</h3><p>本周，消息面上没有什么惊涛骇浪，我大 A 悄咪咪的开启上升节奏，对于什么猫咪战之类的不只是免疫了，有点进入麻木了——这也是金融市场有意思的事情，同类利空多了之后，情绪开始不受影响，有时候甚至会亢奋，走出独立行情；跟周围的群体情绪表现也是很像；政策方面，最期待的莫过于 5.22 召开的两会了，说明防疫工作稳中可控，至少取得了阶段性的成效。数据方面，比较佩服美帝，失业人数激增，但是人家股市唰唰抹平前期的跌幅了，🐂🍺。</p><p><img src="https://s1.ax1x.com/2020/05/10/Y1zsMD.png" alt="本周指数一览"></p><p><kbd><a href="https://www.jisilu.cn/data/indicator/" target="_blank" rel="noopener external nofollow noreferrer">A 股全市场温度计</a></kbd> 本周 PB 18.34，PE 26.69。随着疫情冲击减缓，企业复工的有序进行，大众开始消费了，不过有意思的是出行方面，高速堵路，高铁空荡，航空清闲。这次疫情真的改变了很多方面，希望早日度过难关。</p><p><kbd><a href="https://qieman.com/portfolios/ZH035746/weekly-reports/a46a405f1d3d806f768a88d82ff3a5a7" target="_blank" rel="noopener external nofollow noreferrer">且慢组合</a></kbd> 本周五净值 1.2648，上涨 <font color="red">+1.92%</font>。本周基于上涨态势，依旧无操作。组合中的 <code>中欧价值发现混合 A</code> 近期表现一直不给力，不在风口，今年满手价值股的曹名长不知道会不会难受，至少下面的评论开始另一边倒了。无他，人性；本来想调出部分仓位的，不过话说回来一花一树一菩提，一开一落一节气；每个物种都有自己的春天，况且现在距离上次调仓还不足半年，暂时不进行操作。一直相信一个东西也是一种考验。</p><p><kbd>定投组合</kbd> 本周为止本金 76952.04，市值 83950.13，今年来收益率 <font color="green">-0.99%</font>。组合中的银行、金融地产真是属于安静地等风来了，不温不火，等着过春天。短债倒是近期杀了一波，也算是一个小调整，不过总体可控，短期波动不必在意，盈利也是必然的。</p><p><kbd>网格</kbd> 本周为止本金 10677.04，总市值 10980.48，证券市值本周累计盈利 <font color="red">108.15</font>。本周投入 ￥1,000 建立传媒网格底仓，同时保证各个网格买卖顺利进行。H 股 ETF 买入一格，券商 ETF 卖出两格。</p><p>话说回来，最近一直没有新债可打，而市场爆炒的某只可转债被强赎，一晚上跌去一大半，人多的地方意味着过热，过热等同于风险累计待释放。珍爱生命，不懂不做，守着自己的安全边际——工作有收入，理财赚收益，<del>副业得零钱</del>。一个人赚三份，想想这也算是很不错的理想状态了；期待过高，估计过足，不是好事。嗯，身为半个“后浪”，我还是稍微努力一下下吧，剩下的 00 后们，你们上！</p><h3 id="大户"><a href="#大户" class="headerlink" title="大户"></a>大户</h3><p>前有中行“原油宝”穿仓脱掉投资者一层皮，后边紧接着中信银行也不甘示弱啊，大客户一通指示就把别人的工资流水等明细拿到手了，这普通消费者的底裤都没了，让人心惊胆颤。确实是让人惊掉下巴的内部流程，后续出个道歉声明也是不疼不痒，撤掉支行行长就完事了？！次奥，真是神操作，扒光了菇凉的底裤，发一纸通知就过去了？道歉有用的话，要法律干什么？！网友也是扒出中信银行也不是第一次干这种事情了，X 改不了吃……🤢！</p><p>《<a href="https://movie.douban.com/subject/30223100/" target="_blank" rel="noopener external nofollow noreferrer">The Last Dance</a>》更新了，第五集开篇就缅怀了科比，猝不及防，曾经在全明星中的 one-on-one，如今唏嘘不已😔。给键盘配了一格紫罗兰色的键帽，真是好看的一匹，继续关注小黄鱼🐟，看看能不能淘到金色的键帽，这样可以凑一个紫金键盘了——啊啊，老夫的少年心。昨晚看完了《全金属狂潮 Ⅳ》，FMA 赛高；最后一集的 BGM 是延用第一季的 OP、ED，然而我却有点没有印象了；时间啊，真是淘气的孩子，有时候偷偷把你的记忆拿走，然后某月又悄悄的给你打开。</p><p><img src="https://s1.ax1x.com/2020/05/10/Y3FFTe.md.jpg" alt="8 VS 23"></p><p>今天是母亲节，买了一个慕斯蛋糕🎂和披萨🍕，慰问一下终日水嫩赛豆蔻的阳夫人。也给家里的各位老母亲们打电话聊了一下天，因事所绊，虽不在旁，鸿雁去电，聊以慰藉。另外，再过几天就是又一个纪念日了，钱包告警，😂。前两天小阳说想养一只章鱼🐙，也是醉了🤦‍，小孩子真是什么想法都有啊，好玩。最近迷上了跟我玩儿奥特曼大战怪兽的游戏，这两天加班没顾上，不过家里的瑜伽垫上已经整整齐齐都码成几列了，就等着一起开战了😜。</p><p>工作方面，近期加班较多，不过订的外卖都是不错，都是硬菜，😄。继续在项目上填坑、趟坑，桌子上各种设备的线有时候也是如这现状一样，越理越乱；还好，沉下心了，慢慢把能做好的先做完，总算是有个成果。路漫漫兮，吾定攀登于九天之上。公司开总结会让研究一下物联网，看来新基建的风算是吹到小地方了，顺势而为✊。大领导关注的是结果，基层要做的就是把过程做好。太注重结果，必然是过程痛苦，所以试着享受做事的流程，也是一种让自己避免过于急功近利的修炼。</p><p>天朗气清，惠风和畅，Enjoy ❤！</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;臣密言：……臣无祖母，无以至今日；祖母无臣，无以终余年……乌鸟私情，愿乞终养……&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>散户者，国之大事也</title>
    <link href="https://blog.cfz521.space/posts/777b853e.html"/>
    <id>https://blog.cfz521.space/posts/777b853e.html</id>
    <published>2020-05-06T02:11:39.000Z</published>
    <updated>2020-05-06T10:05:28.495Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>兵者，诡道也……利而诱之，乱而取之，实而备之，强而避之，怒而挠之，卑而骄之，佚而劳之，亲而离之。</p><a id="more"></a><h3 id="略略略"><a href="#略略略" class="headerlink" title="略略略"></a>略略略</h3><p>中行“原油宝”算是有点结果了吧，<a href="http://finance.sina.com.cn/roll/2020-05-05/doc-iircuyvi1482976.shtml" target="_blank" rel="noopener external nofollow noreferrer">砖家评论说是有大行担当</a>，🤮，X 曰： <strong>宁可无耻，不可无钱</strong>！精准赔偿吧这是，散户拿回 20% 本金，大户自行承担损失。啧啧称奇啊，大户可以看作是少数群体了吧，同时这个 $$ 数额上也算是中产了吧，闹起来不体面，所以关起门来割肉放狗，法庭见啊您哪！散户人多势众，庄家扬点面粉洒洒水，安静坐下吃果果，呵呵哒，收割体面人，让散户缴纳智商税呢，“不知耻者，无所不为”！好比村里修路，您倒好大包大揽集资挖个大坑，结果自然是掉进去了不少人，然后埋起来之后吹嘘自己是让村子再次致富和崛起起来的旗帜？！—— 婊子立牌坊，恶汉进庙堂！</p><p><img src="https://s1.ax1x.com/2020/05/06/YAe7gH.jpg" alt="留下了贫穷的泪水😭"></p><p>假期特朗普充分发挥劳动节不休息的概念一顿嘴喷，甩锅不止，想连任也是无所不用其极！今天我大 A 还是很坚挺的，只是有点腹泻，没有拉稀、尿裤子；其实特不靠谱打飞机还是不错的，杀杀估值，释放风险，然后买点筹码。彼得林奇说：“每当股市大跌，我对未来忧虑之时，我就会回忆过去历史上发生过 40 次股市大跌这一事实，来安抚自己那颗有些恐惧的心，我告诉自己，股市大跌其实是好事，让我们又有一次好机会，以很低的价格买入那些很优秀的公司股票”。回到话题本身，最近时不时会感慨一下中西文化的思维真是不同啊，<em>我命由我不由天，死了也要出去浪</em> vs <em>戴好口罩，全民防疫</em>┑(￣Д ￣)┍！另外，媒体阵营论调很是统一，自由万岁，西方体制赛高，戴上眼镜，装上倍镜，放大细节——拆哪别有居心。而我们也是毫不客气的反驳，孰是孰非，很难有论断。局部的正确不代表整体的伟大；为了小民的选票，突突突，冲冲冲！</p><p>股神巴菲特在小长假期间召开了股东大会，说的都是那些普通话，广积粮，缓出手，快斩仓。都是平淡的大白话，看多美股，看好标普 500 指数。比较佩服老爷子的身体和精神状态，虽然管理庞大的财富，然而做得依然很出色。听其言、观其行，我等修行还是不够。不在乎一天的涨跌，而是关注一段时间的趋势，比如一年、三年……</p><h3 id="五一"><a href="#五一" class="headerlink" title="五一"></a>五一</h3><p>五天小长假，没有出去，只是在市里活动了活动，报备有点麻烦，小阳心心念的长岛不能开车上去了，加之这个时节下水也有点冷，在周边找乐子消耗能量吧。第一天晚上领着娃儿去了人民广场，买了几串大面筋，好吃；出来玩儿的人不少，不过没有诸如广场舞之类的集体活动；第二天在家尝试了一下烧烤，感叹串肉也是个技术活，一不小心血染土豆🥔，讲真自己家的肉舍得下血本，烤来真是好吃，馒头片也是外焦里嫩嘎嘣脆；就是清洗略微麻烦了点；第三天去了一个采摘园里，摘草莓🍓，吃水果，看甜瓜和西瓜🍉也算是开心，天气也是热；下馆子吃了个烤🐟，味道不错，米饭也很好吃，活该赚钱，这也算是为拉动我国的 GDP 做贡献了；第四天晚上带娃儿去了商场看玩具，里面也是有点闷热，尽管挥汗如雨，我亦岿然不动，玩起来也是到闭门；最后一天没有出去，小区溜溜，看个电影，睡个觉。对了，让阳夫人给我们俩理了个发，真值！<br>从迪卡侬买来的空顶帽到了，本着头上低调，脚底暗骚的风格，白灰的比较合适，跑了一圈，不错。<del>古语说得好</del>，娃儿没动静必定作妖，一会儿的工夫，把我的硅胶腕托给弄破了。还好发现的早，没有在笔记本上扩散开，否则无语凝噎后<del>混合双打</del>😂，让阳夫人教育了一顿，小阳同志梨花带雨下保证。没办法，换了一个稍微便宜的，顺手入了几个键帽，本来觉得粉笔套的颜色搭配很不错，不过浏览韩度的键帽时，发现一款商品标着灭霸湖人紫的介绍，发现紫色配色挺好的，加上最近看了一下《最后之舞》，所以闲鱼淘了一套紫色的键帽。嗯，这是个无底洞，所以只能发，不能烧，😝。</p><p>PPPS：阳夫人在老家烤串时因为要绑头发翻箱倒柜找出了结婚时的红头绳，扎上真是好看，🌹🌹🌹🌹🌹🌹🌹，上得厅堂下得厨房，青春无敌打 CALL~</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;兵者，诡道也……利而诱之，乱而取之，实而备之，强而避之，怒而挠之，卑而骄之，佚而劳之，亲而离之。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="note" scheme="https://blog.cfz521.space/tags/note/"/>
    
  </entry>
  
  <entry>
    <title>周总结（4/27~5/3）</title>
    <link href="https://blog.cfz521.space/posts/777b853d.html"/>
    <id>https://blog.cfz521.space/posts/777b853d.html</id>
    <published>2020-05-03T12:58:13.000Z</published>
    <updated>2020-05-06T02:26:31.187Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>夏天，夏天，悄悄来临，埋下小秘密。</p><a id="more"></a><h3 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h3><p>跑量 <code>26.96km</code>，天气渐渐热了起来，早上跑步如果跑反了方向，回程的时候那叫一个酸爽，45° 的阳光飞过头顶，顺手溅起一阵热浪，😓，心率也有些升高呢，夏天越来越近了。今年夏天必须买一个空顶帽拔草了，平民专属迪卡侬，蓝色没有货了，选了一个骚橙和低调灰，还没决定要哪一个，😂。搜了一下淘宝的订单，买了不少迪卡侬家的东西，短裤、长裤、短袖、长袖、手套以及🧢、🧦，挺耐用的，虽然会有起球等的小毛病，作为运动初入门足够了。</p><h3 id="理财"><a href="#理财" class="headerlink" title="理财"></a>理财</h3><p>本周最后一天气如长虹的感觉，没有绿绿结尾，难道“五穷六绝”要改变吗？话说间，就明白任何事情不能说的太满，金毛 PIA 打脸了(￣ε(#￣)，一面要求要“睡”我兔，一面伸手要物资，政治家的嘴，动动能让磨推鬼。指数表现上，相较于上周，沪深 300 保持强势，500 也突突突强势崛起，医药在调整节奏中，不过我还是继续“捂股丰登”，没有打算出掉医药基金。</p><p><img src="https://s1.ax1x.com/2020/05/03/Yp3rLt.png" alt="本周指数一览"></p><p><kbd><a href="https://www.jisilu.cn/data/indicator/" target="_blank" rel="noopener external nofollow noreferrer">A 股全市场温度计</a></kbd> 本周 PB 14.22，PE 24.98。一季度报告已经披露完毕，大部分企业受累于盈利（E）不及预期，PE 价格升高，一如去年，传媒板块炸雷之后，PE 飙升📈。</p><p><kbd><a href="https://qieman.com/portfolios/ZH035746/weekly-reports/9d9c65b5e6ecbd0c17e9d398d076f57d" target="_blank" rel="noopener external nofollow noreferrer">且慢组合</a></kbd> 本周五净值 1.2410，上涨 <font color="red">+2.21%</font>。本周基于上涨态势，无操作。</p><p><kbd>定投组合</kbd> 本周为止本金 76168.92，市值 83163.21，今年来收益率 <font color="green">-1.82%</font>。本周进行本月的定投，以及跟投长赢组合，买入待确认 670 元。</p><p><kbd>网格</kbd> 本周为止本金 9677.04，总市值 9964.71，证券市值今年来累计盈亏 <font color="red">93.05</font>，行情突然变好，有种不安，😂天生劳碌命；新开传媒网格，旨在增强波动收益。券商 ETF 买入一格，H 股 ETF 卖出两格、中概互联 卖出一格，传媒 卖出一格。</p><h3 id="The-Last-Dance"><a href="#The-Last-Dance" class="headerlink" title="The Last Dance"></a>The Last Dance</h3><p>最近在追《<a href="https://movie.douban.com/subject/30223100/" target="_blank" rel="noopener external nofollow noreferrer">The Last Dance</a>》，一部关于乔丹的纪录片，乔丹有多厉害，现在就有多想念那个“渣科”，一位是君临大地，一位是最接近“神”的男人。一个人强到一种境界，可以拖着一支队伍打，但是这是条不归路，团队合作的意义在此凸显。</p><p><img src="https://s1.ax1x.com/2020/05/03/Yp3ZZV.md.jpg" alt="来自豆瓣剧照"></p><p>览物于斯，假期快乐！</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;夏天，夏天，悄悄来临，埋下小秘密。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
      <category term="数字生活" scheme="https://blog.cfz521.space/categories/essay/digital-life/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>论一双跑步袜的修养</title>
    <link href="https://blog.cfz521.space/posts/8b03be93.html"/>
    <id>https://blog.cfz521.space/posts/8b03be93.html</id>
    <published>2020-04-30T02:46:37.000Z</published>
    <updated>2020-04-30T03:53:42.862Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --><html><head></head><body><p>袜者，足之衣也。</p><a id="more"></a><p>自从两双跑步袜底部磨得稀疏了之后，就剩一下一双凑单的美津浓单打了，想着也抗不了多长时间，是时候买一双了。然而，现实总是如雨林的气候一样冷不丁滋醒你，原来这玩意儿也是上不封顶，🤣。作为一名装备党，虽然没有，但不能不知道，所谓盼着也不能放过。</p><h3 id="X-SOCKS"><a href="#X-SOCKS" class="headerlink" title="X-SOCKS"></a>X-SOCKS</h3><p>跑圈大概是言必称 <code>X-SOCKS</code> 了，瑞士设计意大利生产，贵的”壕“无人性，口水ˋ( ° ▽、° ) 中，随便<a href="https://detail.tmall.com/item.htm?id=599061596593" target="_blank" rel="noopener external nofollow noreferrer">贴一个</a>感受下为何要努力挣钱，<del>然后安慰自己段位还不够</del>，💪。<br><img src="https://s1.ax1x.com/2020/04/30/JbK7wV.jpg" alt="X-SOCKS竞技运动袜子男女专业马拉松跑步压缩篮球越野中筒XBIONIC ￥199"></p><h3 id="五指袜"><a href="#五指袜" class="headerlink" title="五指袜"></a>五指袜</h3><p>五指袜在长距离跑步以及越野跑下对于脚趾的保护似乎更胜一筹，这方面，<a href="https://mall.jd.com/view_page-87174925.html" target="_blank" rel="noopener external nofollow noreferrer">Injinji</a>提及的比较多，采用 <code>COOLMAX</code> 面料，吸湿排汗。价格 90 左右起步，相对亲民，比赛的时候可以备一双。备选我看到有提到<code>爱燃烧</code>的<a href="https://detail.tmall.com/item.htm?id=576534212507" target="_blank" rel="noopener external nofollow noreferrer">五指袜</a>，羊毛中筒，采用莱卡纤维，足跟加厚，有机会上脚试一下。<br><img src="https://s1.ax1x.com/2020/04/30/Jbl4QH.md.png" alt="injinji 五指袜 中筒薄款跑步袜 防水泡coolmax男女速干纯色袜 ￥89.00"></p><h3 id="美利奴羊毛袜"><a href="#美利奴羊毛袜" class="headerlink" title="美利奴羊毛袜"></a>美利奴羊毛袜</h3><p>大名鼎鼎的美利奴羊毛，保暖性能优异，天冷了计划给阳夫人买几双，候选的品牌有 <code>smartwool</code>、<code>Zealwood 赛乐</code>、<code>icebreaker</code>。<a href="https://mall.jd.com/index-10078986.html" target="_blank" rel="noopener external nofollow noreferrer">Smartwool</a> 看介绍是四季通用，毕竟价格也是在那里。<br><img src="https://s1.ax1x.com/2020/04/30/Jb1Bh8.md.jpg" alt="Smartwool PhD户外重量级中筒袜 滑雪袜运动袜 美利奴羊毛袜 1073 ￥269.00"></p><h3 id="平价"><a href="#平价" class="headerlink" title="平价"></a>平价</h3><h4 id="AMAZFIT"><a href="#AMAZFIT" class="headerlink" title="AMAZFIT"></a>AMAZFIT</h4><p>逛张大妈时，无意中发现 <a href="https://www.xiaomiyoupin.com/detail?gid=107900" target="_blank" rel="noopener external nofollow noreferrer">AMAZFIT竞速运动袜 短筒</a> 看评价不错，“护踝设计，防滑减震，加厚毛圈，抗菌排汗”，就是包邮门槛过高，躁动不如行动，行动不如早动，出手试试效果如何。<br><img src="https://s1.ax1x.com/2020/04/30/Jb3Iat.md.png" alt="AMAZFIT竞速运动袜 短筒 ¥19"></p><h4 id="迪卡侬"><a href="#迪卡侬" class="headerlink" title="迪卡侬"></a>迪卡侬</h4><p>平价我最爱，从前面买的 19.9 两双的<a href="https://detail.tmall.com/item.htm?id=7910828897" target="_blank" rel="noopener external nofollow noreferrer">袜子</a>来看，会让鞋子染色🤦‍，其他还好些，比较耐穿，没有起球的现象。不过 14.9 三双看评价，更适合日常穿着吧，如果跟地摊差别不大的话，包邮的时候买比较合适。纠结之下，入手了一双 19.9 的<a href="https://detail.tmall.com/item.htm?id=527332763891" target="_blank" rel="noopener external nofollow noreferrer">KIPRUN 专业跑步袜支撑</a>，正好与上面的 amazfit 做一下对比。</p><p><img src="https://s1.ax1x.com/2020/04/30/JbYvlT.md.jpg" alt="迪卡侬 运动袜船袜专业跑步袜支撑耐磨速干透气浅口袜子(1双)RUNR ¥ 19.90"></p><p><em>注：以上图片均来自官方商城</em></p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;袜者，足之衣也。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="装备党" scheme="https://blog.cfz521.space/tags/%E8%A3%85%E5%A4%87%E5%85%9A/"/>
    
      <category term="跑跑乐" scheme="https://blog.cfz521.space/tags/%E8%B7%91%E8%B7%91%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>HTML5 SSE</title>
    <link href="https://blog.cfz521.space/posts/3f40258a.html"/>
    <id>https://blog.cfz521.space/posts/3f40258a.html</id>
    <published>2020-04-29T02:03:18.000Z</published>
    <updated>2020-04-29T08:09:46.387Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>HTML5 服务器发送事件(Server-Sent Events) 使用。</p><a id="more"></a><p>我们都知道服务端与客户端之间通信现在多数用 <code>WebSocket</code>，在此之前，还有传统 <code>Ajax</code> 短轮询、<code>Comet</code> 技术，以及本文要提及的 <code>SSE（Server-sent Events）</code>。</p><h3 id="What"><a href="#What" class="headerlink" title="What"></a>What</h3><p>服务器推送事件（Server-sent Events），简称SSE，是 HTML 5 规范中的一个组成部分，是一种服务器向客户端发送事件和数据的<strong>单向通讯</strong>协议。客户端不会关闭连接，会一直等着服务器发过来的新的数据流，当客户端收到消息后会再次发送请求，周而复始。</p><h3 id="When"><a href="#When" class="headerlink" title="When"></a>When</h3><p>基于上述定义，可以知道网页客户端自动获取来自服务器的更新数据，所以 SSE 适合诸如<em>主从控制场景、服务端下发消息无互动、自动更新、物联网信息下发</em>等。</p><h4 id="Support"><a href="#Support" class="headerlink" title="Support"></a>Support</h4><p>浏览器支持情况：主流浏览器均支持服务器发送事件，除了 IE👎。</p><h3 id="How"><a href="#How" class="headerlink" title="How"></a>How</h3><p>带着以上认知，我们可以简单搭建一个 demo，用来演示服务端发送消息给网页客户端。其中服务端实现协议部分，而网页端使用的主要 API 为 <code>EventSource</code>：通过 <code>new EventSource(url)</code> 生成实例对象建立连接，然后就是处理事件的监听：</p><ul><li>open：<code>onopen/addEventListener("open", function(event) {// handle open event}, false)</code></li><li>message: <code>onMessage/addEventListener("message",function(event) {// handle open event}, false))</code></li><li>error: <code>onError/addEventListener("error",function(event) {// handle open event}, false))</code></li><li>自定义事件：<code>addEventListener("cfz",function(event) {// handle open event}, false))</code></li></ul><p>其中，<code>event</code> 对象中属性有<code>data（服务端数据）</code>、<code>origin（服务器端URL的域名部分）</code>、<code>lastEventId（服务端发送的数据的编号）</code></p><h4 id="Enviroment"><a href="#Enviroment" class="headerlink" title="Enviroment"></a>Enviroment</h4><ul><li>go 1.13.7</li><li>Win 10 x64</li><li>goland 2019</li></ul><p>选择 golang 是因为我们可以更方便地模拟跨线程处理消息的情况——服务端（S）接收一方（M）发来的消息，然后下发到客户端（C）。这其中 M 端使用 POST 请求发送数据，S 端利用协程将处理好的数据下发给 C。C 收到信息后，会再次请求服务端数据。</p><div id="flowchart-0" class="flow-chart"></div><h4 id="S-端"><a href="#S-端" class="headerlink" title="S 端"></a>S 端</h4><p>我们采用 <code>gin</code> 作为服务处理以及转发请求，另外就是加载 HTML 模拟 M 和 C 的动作：</p><ul><li><p>创建服务器</p><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app := gin.Default()</span><br><span class="line">sseRouter := app.Group(<span class="string">`/sse`</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> {})</span><br><span class="line"><span class="comment">// 逻辑处理</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">if</span> err := app.Run(fmt.Sprintf(<span class="string">":%d"</span>, <span class="number">9529</span>)); err != <span class="literal">nil</span> {</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>处理请求：<code>gin</code> 中已经封装好相关的逻辑，调用即可，PS：其实不用 <code>gin</code>，用 golang 本身的 <code>http</code> 库也完全可以实现，发送的时候，类型记得要设置成 <code>text/event-stream</code></p><figure class="highlight go"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> <span class="string">"github.com/gin-gonic/gin"</span></span><br><span class="line"><span class="comment">// 消息管道</span></span><br><span class="line"> <span class="keyword">var</span> msgChan = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"> <span class="comment">// M 发送消息</span></span><br><span class="line"> sseRouter.POST(<span class="string">"/move.cfz"</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> {</span><br><span class="line">     msg := context.PostForm(<span class="string">"msg"</span>)</span><br><span class="line">     log.Printf(<span class="string">"receive from M: %s"</span>, msg)</span><br><span class="line">     <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(m <span class="keyword">string</span>)</span></span> {</span><br><span class="line">         <span class="comment">// 发送</span></span><br><span class="line">         msgChan &lt;- m</span><br><span class="line">     }(msg)</span><br><span class="line"> })</span><br><span class="line"></span><br><span class="line"> <span class="comment">// C 端接收消息</span></span><br><span class="line"> sseRouter.GET(<span class="string">"/go.cfz"</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span> {</span><br><span class="line">     w := context.Writer</span><br><span class="line">     h := w.Header()</span><br><span class="line">     <span class="comment">//h.Set("Cache-Control", "no-cache")</span></span><br><span class="line">     <span class="comment">//h.Set("Connection", "keep-alive")</span></span><br><span class="line">     h.Set(<span class="string">"Content-Type"</span>, <span class="string">"text/event-stream"</span>)</span><br><span class="line">     <span class="comment">//h.Set("X-Accel-Buffering", "no")</span></span><br><span class="line">     <span class="keyword">if</span> msg, ok := &lt;-msgChan; ok {</span><br><span class="line">         event := sse.Event{</span><br><span class="line">             Id:    time.Now().String(),</span><br><span class="line">             Event: <span class="string">"message"</span>,</span><br><span class="line">             Data:  msg,</span><br><span class="line">         }</span><br><span class="line">         <span class="keyword">if</span> e := sse.Encode(w, event); e != <span class="literal">nil</span> {</span><br><span class="line">             log.Println(e.Error())</span><br><span class="line">             <span class="keyword">return</span></span><br><span class="line">         }</span><br><span class="line">         log.Printf(<span class="string">"send to C: %s"</span>, msg)</span><br><span class="line">     }</span><br><span class="line"> })</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="浏览器端处理"><a href="#浏览器端处理" class="headerlink" title="浏览器端处理"></a>浏览器端处理</h4><p>C 端实现 SSE 方法即可，简单易用：</p><figure class="highlight js"><figcaption><span>client.js</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">window</span>.EventSource) {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"web is not support"</span>);</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">var</span> source = <span class="keyword">new</span> EventSource(<span class="string">'/sse/go.cfz'</span>);</span><br><span class="line">    source.addEventListener(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"get message"</span> + e.data);</span><br><span class="line">         <span class="built_in">document</span>.getElementById(<span class="string">'message'</span>).innerText = e.data;</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    source.addEventListener(<span class="string">'open'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"connect is open"</span>);</span><br><span class="line">    }, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    source.addEventListener(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">        <span class="keyword">if</span> (e.readyState === EventSource.CLOSE) {</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"connect is close"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="built_in">console</span>.log(e.readyState);</span><br><span class="line">        }</span><br><span class="line">    }, <span class="literal">false</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight html"><figcaption><span>clien.html</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&#60;</span>div id="message"<span class="symbol">&gt;</span><span class="symbol">&#60;</span>/div<span class="symbol">&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>M 端发送消息：</p><figure class="highlight js"><figcaption><span>master.js</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) {</span><br><span class="line">            <span class="comment">// loaded</span></span><br><span class="line">            <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) {</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                alert(<span class="string">"Problem retrieving XML data"</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> msg = <span class="built_in">document</span>.getElementById(<span class="string">'message'</span>).value;</span><br><span class="line">    xhr.open(<span class="string">"POST"</span>, <span class="string">'/sse/move.cfz'</span>, <span class="literal">true</span>);</span><br><span class="line">    xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">    xhr.send(<span class="string">`msg=<span class="subst">${msg}</span>`</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight html"><figcaption><span>master.html</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&#60;</span>div id="message"<span class="symbol">&gt;</span></span><br><span class="line">    <span class="symbol">&lt;</span>textarea id="message"<span class="symbol">&gt;</span>哈哈<span class="symbol">&lt;</span>/textarea<span class="symbol">&gt;</span></span><br><span class="line">    <span class="symbol">&lt;</span>button onclick="send()"<span class="symbol">&gt;</span>发送<span class="symbol">&lt;</span>/button<span class="symbol">&gt;</span></span><br><span class="line"><span class="symbol">&#60;</span>/div<span class="symbol">&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="The-End"><a href="#The-End" class="headerlink" title="The End"></a>The End</h3><p>通过以上 demo，我们可以知道在数据单向流动时，选择 <code>SSE</code> 是比较好的，除了协议足够简单外，在各个语言的实现也更容易，基于现有的 <code>HTTP(s)</code> 服务即可，并且支持断线重连和自定义数据格式；而 <code>WebSocket</code> 则需要升级协议，适用于双向通讯的情况。总而言之，两者都是 <code>HTML 5</code> 规范里的标准技术，对于解决遗留的轮询等技术问题能达到很好的效果。</p><h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><ul><li>[1] <a href="http://www.w3cbus.com/htmlapi/eventsource.html" target="_blank" rel="noopener external nofollow noreferrer">SSE：服务器发送事件</a></li><li>[2] <a href="http://www.52im.net/thread-335-1-1.html" target="_blank" rel="noopener external nofollow noreferrer">SSE技术详解：一种全新的HTML5服务器推送事件技术</a></li><li>[3] <a href="https://www.w3cschool.cn/html5/html5-serversentevents.html" target="_blank" rel="noopener external nofollow noreferrer">HTML5 SSE</a></li><li>[4] <a href="https://www.cnblogs.com/jpf111/p/11494294.html" target="_blank" rel="noopener external nofollow noreferrer">Java SSE 实现</a><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display:none">m=>start: Ms=>operation: Sio=>inputoutput: Data Process and Sendc=>end: Cm->ss(right)->ioc(left)->io(left)io->c</textarea><textarea id="flowchart-0-options" style="display:none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>var code=document.getElementById("flowchart-0-code").value,options=JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)),diagram=flowchart.parse(code);diagram.drawSVG("flowchart-0",options)</script></li></ul><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;HTML5 服务器发送事件(Server-Sent Events) 使用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="教程" scheme="https://blog.cfz521.space/categories/tutorials/"/>
    
    
      <category term="HTML5" scheme="https://blog.cfz521.space/tags/HTML5/"/>
    
      <category term="SSE" scheme="https://blog.cfz521.space/tags/SSE/"/>
    
      <category term="golang" scheme="https://blog.cfz521.space/tags/golang/"/>
    
      <category term="go" scheme="https://blog.cfz521.space/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>4月发车</title>
    <link href="https://blog.cfz521.space/posts/b184cbfd.html"/>
    <id>https://blog.cfz521.space/posts/b184cbfd.html</id>
    <published>2020-04-28T05:49:56.000Z</published>
    <updated>2020-04-30T06:19:40.259Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>本月定投发车，合计 450 元。</p><a id="more"></a><h3 id="月定投"><a href="#月定投" class="headerlink" title="月定投"></a>月定投</h3><table><thead><tr><th align="left">NAME</th><th align="right">Amount</th></tr></thead><tbody><tr><td align="left">易方达中证500</td><td align="right">70</td></tr><tr><td align="left">嘉实基本面50</td><td align="right">140</td></tr><tr><td align="left">华宝香港中小</td><td align="right">0</td></tr><tr><td align="left">中欧医疗健康</td><td align="right">10</td></tr><tr><td align="left">国泰国证食品饮料</td><td align="right">10</td></tr><tr><td align="left">申万菱信沪深300</td><td align="right">0</td></tr><tr><td align="left">易方达恒生</td><td align="right">100</td></tr><tr><td align="left">大成中证红利</td><td align="right">120</td></tr></tbody></table><p><em>说明：表中的 10 元为象征性投入，相比 3 月发车医药停止投入的情况，本月消费同样也进入了停止投入的节点，这两个品种当前的涨幅真是喜人，也说明本月热点不多，抱团热度过高，不宜追高，目前策略还是持有不动。而沪深 300 指数月末这几天也同样强势，由此发车金额减少。</em></p><h3 id="跟车"><a href="#跟车" class="headerlink" title="跟车"></a>跟车</h3><p>4/30 跟车长赢买入全指金融一份，中证红利一份，个人追加工银金融一份：基于 E 大买入金融，当前已有抬头之势，这两天的涨幅不小，但不足以抹平跌幅，故跟随调仓主动基金。另外，长赢卖出一份医药，个人持仓中全指医药不多，故选择不卖出。</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;本月定投发车，合计 450 元。&lt;/p&gt;
    
    </summary>
    
    
      <category term="滴滴" scheme="https://blog.cfz521.space/categories/get-on-bus/"/>
    
    
      <category term="定投" scheme="https://blog.cfz521.space/tags/%E5%AE%9A%E6%8A%95/"/>
    
  </entry>
  
  <entry>
    <title>周总结（4/20~4/26）</title>
    <link href="https://blog.cfz521.space/posts/7698081c.html"/>
    <id>https://blog.cfz521.space/posts/7698081c.html</id>
    <published>2020-04-26T01:54:49.000Z</published>
    <updated>2020-05-06T02:26:23.096Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>原本接近于本能驱动的动作，现在能从中明确感受到“思考”了；而眼下还有点笨手笨脚的那些动作，伴随着重复试错和积累经验，将会转化为与本能似是而非的东西，以“直觉”这一形态展示出来。</p><a id="more"></a><p><img src="https://s1.ax1x.com/2020/04/26/J6I0Og.md.jpg" alt="排球少年第四季 第3集"></p><h3 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h3><p>跑量 <code>26.99km</code>，本周五在操场跑了一次，下午虽然有风，但却是春风送暖的感觉，脚踩在塑胶上很巴适；在北侧屋子宅久了，没感觉到春天就已经就着厕所的阵阵怪味道感受夏天了，😷。起跑的时候稍微刹了一些速度，后边感觉可以越跑越快，于是放开了跑，结果就是今天腰有点难受，发力是不是不正确？配速 <code>443</code>，还凑合，应该可以更快些，心率峰值📈达到了 174，想来达到初中时的 <code>345</code> 有难度啊✊，相信自己是一个 18 的小伙子。</p><h3 id="理财"><a href="#理财" class="headerlink" title="理财"></a>理财</h3><p>继续白开水行情，阴跌缩量，没啥可操作的地方，上不去，也下不来太多。这两天我看着外围开始疯狂指责我🐇的“防溢”政策了，有的律师还发起了诉讼，想来也是佩服老外们的固执劲儿——你公布说你假，你帮助道你窃，你封城斥你绝……┑(￣Д ￣)┍，做人也是如父子抬驴——南！但是里面有没有掺杂别的情绪不好说，而且这种诉讼小老百姓看来就是搞笑的吧，因为成功率基本上就是 0，<del>当然有其他的野心另说</del>。</p><p><img src="https://s1.ax1x.com/2020/04/26/J6bvo4.png" alt="本周指数表现"></p><p>本周军工开始表现了，黄金一直在嗨着，原因吗，地表最强 80后似乎有点危险，到目前为止没啥可印证的消息，要是真 over 了，免不了一阵动荡。中行“原油宝”继续发酵，在我看来银行不够有担当，这不就有客户开始跑路转移资金了，中行连忙发公告安抚，更多的是担心给他行送大礼。医药有新高了，茅台也是酒中一枝独秀，趋势不明朗，继续拱泡沫，安心持有。<br>“<del>得益于</del>”瑞幸咖啡👎，美国 SEC 主席特意对中概股发表讲话，提示投资者不要投资中概股，老大在这个时间节点亲自下场指导，相当于投了不信任票，对于 <code>中概互联</code> 和 <code>中国互联</code> 会造成一定的压力🍐，说不定后面会砸下来😋。<a href="https://mp.weixin.qq.com/s/RKww6qj0pkl1cUy590qADA" target="_blank" rel="noopener external nofollow noreferrer">大 V </a>说中概场内价格 <em>1.3</em> 以下是好价，可以参考。宏观上，A 类公司如阿里、腾讯、狗东等，长期看好。<br>放水行情持续，以后买砖的价格都会变相提升，债券基金的收益明显提升，而货币基金有点难受了。</p><p><kbd><a href="https://www.jisilu.cn/data/indicator/" target="_blank" rel="noopener external nofollow noreferrer">A 股全市场温度计</a></kbd> 本周 PB 15.34，PE 21.01。</p><p><kbd><a href="https://qieman.com/portfolios/ZH035746/weekly-reports/dbc8fe05e91baca9549f232d4d1598a4" target="_blank" rel="noopener external nofollow noreferrer">且慢组合</a></kbd> 本周五净值 1.2142，上涨 <font color="green">-0.24%</font>。4/24 上证回调 <font color="green">-1.06%</font> 至 <font color="green">2808.53</font>，买入一份 200 元，总投入 11,600，市值 11,743.27，累计收益率 <font color="red">1.26%</font>。</p><p><kbd>定投组合</kbd> 本周为止本金 75729.93，市值 79992.62，今年来收益率 <font color="green">-4.20%</font>。<em>这里继续沿用蚂蚁财富里的算法，因为本周清仓 <code>南方原油</code>：整数份额转托管卖出，小数份额场外卖出，所以表面收益会下降一点，实际场内价格 <code>0.767</code> 卖出，本基金收益率在 <font color="red">5.5%</font> 多一点</em>。</p><p><kbd>网格</kbd> 本周为止本金 9677.04，总市值 9622.62，证券市值今年来累计盈亏 <font color="green">-235.16</font>。H 股 ETF、券商 ETF、中概互联 买入一格。</p><h3 id="时间管理"><a href="#时间管理" class="headerlink" title="时间管理"></a>时间管理</h3><p>一瓜未平，一波又起，罗🐖挑战时间极限算是玩破功了，屈楚萧也是大写的叹号，彼时你侬我侬，此刻相思与君绝，当风扬其灰……<del>不说了，我去格式化手机了</del>，德不配位，必有灾殃。</p><p>春暖花开，操场上人少很安静，七里闻花❀香，十里好春风，抬手送纸鸢，乘风破晴空。且待日西斜，小儿堆沙忙。疯玩了一下午，感谢阳夫人的栽培😘，小阳同志的自行车技术越来越好了🎉，想起以前自己用大梁自行车学的时光，时间好快，虽不至一跑三喘，却也是遇风怕冷。</p><p><img src="https://s1.ax1x.com/2020/04/26/J6v8iD.md.jpg" alt="🥤🥤🥤"></p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;原本接近于本能驱动的动作，现在能从中明确感受到“思考”了；而眼下还有点笨手笨脚的那些动作，伴随着重复试错和积累经验，将会转化为与本能似是而非的东西，以“直觉”这一形态展示出来。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
      <category term="数字生活" scheme="https://blog.cfz521.space/categories/essay/digital-life/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>在支付宝购买的基金如何转托管</title>
    <link href="https://blog.cfz521.space/posts/ac7deb36.html"/>
    <id>https://blog.cfz521.space/posts/ac7deb36.html</id>
    <published>2020-04-22T08:06:52.000Z</published>
    <updated>2020-04-24T01:43:51.392Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>最近的美股以及原油暴跌，而后投资者疯狂涌入抄底，导致外汇额度用尽，只能场内交易。</p><a id="more"></a><p>这两天原油让我见识了什么叫做老手死于抄底，想着支付宝里还有一点 <code>南方原油</code> 的基金，要想少赔或者套利只能转入场内交易了。于是在去券商处临柜处理（其实可以不去的👀）之前，我咨询了支付宝的客服， “我的”-> “我的客服”->”在线咨询”，输入“基金如何转托管”，就可以看到具体攻略。再输入“人工客服”可以转接人工客服：</p><blockquote><p>跨系统转托管要求：<br>①该基金支持场内交易，可联系具体基金公司咨询确认。</p><p>②发起跨系统转托管申请前，应确保您已开通券商账户， 在券商的账户已绑定银行卡，且将场内基金账户与场外基金账户进行关联，否则可能会转托管处理失败，具体您可和券商咨询确认。<br>③您在发起转托管申请后，需确认券商委托交易系统下挂了基金交易账户，具体您可和券商咨询。<br>④需提供转入的券商机构在对应交易所准确的券商席位号，比如某基金支持在上海交易所进行场内交易，如果您持有该基金，且需要将该基金转托管到广发证券公司，那么需要提供广发证券公司在上海交易所 A股的席位号，具体可联系对应券商机构咨询确认（不同的营业部可能席位号也不同）。<br>⑤请和转入的券商确认转托管是否可以受理基金份额全部转入（含小数部分），如券商仅支持转托管整数份额，请您提交整数份额申请。</p></blockquote><p>所以要做转托管，去券商处要做的是带好身份证-开户-绑卡-场外基金账户做场内外关系关联（<em>「场外 TA 账户」与「场内股东账户」或者「场内封基账户」关联</em>）-确加挂基金交易账户-获取券商沪、深席位号（<strong>上海基金对应上海席位号，深圳基金对应深圳席位号</strong>）-询问是否<strong>仅支持整数份额</strong>。</p><h4 id="招商证券"><a href="#招商证券" class="headerlink" title="招商证券"></a>招商证券</h4><p>以招商证券为例，深 A 和沪 A 的账户在开户的时候已经设立好了，所以，你不需要临柜，线上就可以操作，南方基金是上交所的基金，你要做的就是获取招商证券上交所的席位号（沪：22833 深：010500）。<br>上面完成后，回到支付宝找人工申请转托管，请再次注意「<strong>跨系统转托管蚂蚁端可申请份额全部转出（支持小数点后2位），但券商一般仅受理整数申请，因此发起转托管申请前， 您可和券商确认是否可以受理非整数申请 ，如券商不支持，您可提交整数份额申请，小数点后留在场外</strong>」。按照提示，继续操作就可以了，一般第二天就可以看到份额减少了：</p><p><img src="https://s1.ax1x.com/2020/04/22/JNZ6HO.jpg" alt="支付宝客服引导操作"></p><p>第二天就会收到短信提示：</p><blockquote><p>【蚂蚁基金】尊敬的用户：你在“蚂蚁财富”理财App所持有的基金资产：南方原油(QDII-FOF)A（501018）持有份额 xyz 份，已经成功从你的 cfz 账户转出，转入至你的账户中，你可在下一基金交易日在转入账户中查看资产。</p></blockquote><h4 id="华宝证券"><a href="#华宝证券" class="headerlink" title="华宝证券"></a>华宝证券</h4><p>华宝证券可以在线操作场外 TA 账户与场内账户建立关联，<code>华宝智投app→交易→开放式基金→基金申购→申购少量同市场同类型且支持转托管的基金→到达持仓之后→点击转托管→自动建议TA与场内账户的关联</code> <a href="#refer-anchor"><sup>1</sup></a>。自动建立关联之后，就可以去天天基金/支付宝蚂蚁财富进行转托管流程了。</p><p><img src="https://s1.ax1x.com/2020/04/23/Ja9cNR.jpg" alt="支付宝和天天基金转托管教程"></p><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><div id="refer-anchor"></div><ul><li>[1] <a href="http://www.360doc.com/content/20/0326/17/35528094_901841503.shtml" target="_blank" rel="noopener external nofollow noreferrer">支付宝和天天基金转托管教程</a></li></ul><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;最近的美股以及原油暴跌，而后投资者疯狂涌入抄底，导致外汇额度用尽，只能场内交易。&lt;/p&gt;
    
    </summary>
    
    
      <category term="教程" scheme="https://blog.cfz521.space/categories/tutorials/"/>
    
      <category term="数字生活" scheme="https://blog.cfz521.space/categories/tutorials/digital-life/"/>
    
    
      <category term="基金转托管" scheme="https://blog.cfz521.space/tags/%E5%9F%BA%E9%87%91%E8%BD%AC%E6%89%98%E7%AE%A1/"/>
    
      <category term="支付宝" scheme="https://blog.cfz521.space/tags/%E6%94%AF%E4%BB%98%E5%AE%9D/"/>
    
  </entry>
  
  <entry>
    <title>Long Live The History</title>
    <link href="https://blog.cfz521.space/posts/322c9e21.html"/>
    <id>https://blog.cfz521.space/posts/322c9e21.html</id>
    <published>2020-04-21T00:40:26.000Z</published>
    <updated>2020-04-22T08:05:41.247Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>The history often behaves the haphazard that is posse dirty, like sharp onrush.</p><a id="more"></a><blockquote><p>历史不时表现为一团乌七八糟的偶然事件，像急转的洪流一样。<br>— 雅斯贝尔斯</p></blockquote><p>2020 年似乎是个不断见证历史的年代，有太多的没想到，有太多的意外，有太多的偶然。回过头翻一下这过去的几个月，有时候会有种“历史不过是追求着自己目的的人的活动而已”的感觉。</p><h3 id="美股活久见"><a href="#美股活久见" class="headerlink" title="美股活久见"></a>美股活久见</h3><p>都说太阳底下没有新鲜事，也有<del>树人说历史就是过去的剧烈重复</del>，然：</p><blockquote><p>3 月 08 日，巴菲特：我活了 89 岁，只见过一次美股熔断。<br>3 月 09 日，巴菲特：我活了 89 岁，只见过两次美股熔断。<br>3 月 12 日，巴菲特：我活了 89 岁，只见过三次美股熔断。<br>3 月 16 日，巴菲特：我太年轻了……</p></blockquote><p>美股“八熔八耻”，这是我从没见过的，今年风大浪大，不要随意溜达，上一秒满仓做多，下一秒立马爆仓，号不住脉，原地装死。对于我们小散，可以有机会进场捞一点点筹码，分散风险。顺带提一句红空了，暴跌到 21000 也是头次见到，feel 倍儿爽，进坑捡了一点💎。</p><h3 id="A-股指数异常"><a href="#A-股指数异常" class="headerlink" title="A 股指数异常"></a>A 股指数异常</h3><p><img src="https://s1.ax1x.com/2020/04/21/J3wlff.png" alt="财联社截图"></p><p>昨天（2020 年 4 月 20 日）中午下班，看了一下指数，我xx，啥情况，医药 ETF 暴跌 <font color="green">12%</font>，“419” 魔咒应验了？！激动的我打开证券软件，准备挂单捞点 ETF，啊来来（柯南音🧐），场内外溢价了吗，那我等尾盘买🐓吧。后来，上交所发布公告 P 谣了，数据错误。呵呵🙂，没赶上当年的光大乌龙指，体验下中证市场指数异常也不算遗憾了，至少这一刻大家都跑赢了市场🎉。当然，冥冥中自有玄学，这历史的隐喻，要昭告韭菜们，跑步入场的时机到了吗？</p><p><a href="https://imgchr.com/i/J3wpwR" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://s1.ax1x.com/2020/04/21/J3wpwR.jpg" alt="J3wpwR.jpg"></a></p><h3 id="买桶送油-vs-“负”的流油"><a href="#买桶送油-vs-“负”的流油" class="headerlink" title="买桶送油 vs “负”的流油"></a>买桶送油 vs “负”的流油</h3><p>今儿早上起来，照例看一下新闻，五月 WTI 原油合约报价 <font color="green">-$37.63</font>，“特不靠谱油厂厂长跑路了，全场原油期货桶桶倒贴!”。油价跌入负值，这是纽约商品交易所1983年开设轻质原油期货交易以来从未出现过的现象。我觉得毛熊、金毛和骆驼应该要再谈一下了，三方掰手腕，我兔收大礼，“兄弟疼不疼，坚持下就好了，忍字头上一把刀”，🤣。昨天这个节点的简单逻辑主要是 <code>疫情冲击 - 经济封锁 - 需求下降 - 油价三国杀疯狂产油 - WTI 主要交割地库欣已经满了- 5 月合约的最后一天交割 - 要么卖掉要么现场收原油 - 原油存储要求高 - 多头（偷鸡）被逼疯狂平仓出货 - 油价暴跌</code>。<br>简而言之，小明看到最近🥚价格暴跌，只想抄底赚中间商差价并不是真想囤一屋子蛋，心大不如胆大，美滋滋“抄底”，结果奸商疯狂下蛋，最后合同到期大家都想卖出手中的鸡蛋，于是价格暴跌，鸡飞蛋打🤢。<br>原油的逻辑比较硬核，<strong>不懂不碰</strong>，比如会牵涉到 <code>升水（CONTANGO）</code> 和 <code>贴水（BACKWARDATION）</code> 的问题。看到这里，<code>华宝油气</code> 和 <code>南方原油</code> 留下了不争气的泪水，🙃。目前 <code>南方原油</code> 场内还有溢价，考虑转托管到场内，择机出掉。</p><p><img src="https://s1.ax1x.com/2020/04/22/JtTh59.jpg" alt="题图来自网络"></p><blockquote><p>在期货市场上，现货的价格低于期货的价格，则基差为负数，远期期货的价格高于即期期货的价格，这种情况叫“期货升水” ，也称“现货贴水”，远期期货价格超出即期货价格的部分，称“期货升水率”（CONTANGO）；如果远期期货的价格低于即期期货的价格、现货的价格高于期货的价格，则基差为正数，这种情况称为“期货贴水”，或称“现货升水”，远期期货价格低于即期期货价格的部分，称“期货贴水率”。<a href="#refer-anchor"><sup>1</sup></a></p></blockquote><p>Update on 2020年4月22日：感受下中行的 sao 操作，强平还要倒贴钱给银行，😒，“中行公告宣布以“-37.63美元”为结算价。……只要投资者是3月19日之后买入持有原油宝美国原油2005（做多）产品。大概率不仅已亏完全部本金，还要以每桶-37.63美元，折合人民币约266元/桶的价格，补足交割款。 （<a href="https://mp.weixin.qq.com/s/wRtxn_32chptCkr8Ht7TeQ" target="_blank" rel="noopener external nofollow noreferrer">资事堂</a>）”。这个真是学到了不少冷知识，上了一课！另外让人担心的是 6 月合约部分，美国最大的原油 ETF 基金 —— USO，几只原油基金 FOF 组合总也持有其份额，这恐怕也会成为空头的目标，造成踩踏。</p><p><img src="https://s1.ax1x.com/2020/04/22/Jtb3C9.jpg" alt="网友截图"></p><h3 id="To-be-continued"><a href="#To-be-continued" class="headerlink" title="To be continued?"></a>To be continued?</h3><p>接下来到底如何演绎，拭目以待，临阵观法了，全球放水的盒子已经打开了，但愿能多捞点🐟，有备无患。话说，今天看到一篇评述《清平乐》里评述章献明肃皇太后刘娥的<a href="https://mp.weixin.qq.com/s/_8cOENPHzYZLQHqGHqkSYg" target="_blank" rel="noopener external nofollow noreferrer">文章</a>，其中一句，“我们评价一个历史人物，尤其是影响了历史进程和社会发展的大人物，除了生活化的私德，还要看她做的那些公事。”，略有感触。下面送给所有隐忍的“猎人们”：</p><blockquote><p>她从小吃过很多苦，走过很多坎坷路，阅尽人间冷暖，尝过种种苦辣辛酸，这些经历和感知，都构成了她的个人能力和品质。</p></blockquote><p><img src="https://s1.ax1x.com/2020/04/21/J3rXqg.md.jpg" alt="南都周刊"></p><p><del><em>不管大 A 从钻石变青铜，还是战五渣上位到白银，安静待你变成我的猎物U•ェ•U（手动狗头）</em></del></p><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><div id="refer-anchor"></div><ul><li>[1] <a href="https://baike.baidu.com/item/%E5%8D%87%E6%B0%B4/17699079?fr=aladdin" target="_blank" rel="noopener external nofollow noreferrer">升水</a></li></ul><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;The history often behaves the haphazard that is posse dirty, like sharp onrush.&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="活久见" scheme="https://blog.cfz521.space/tags/%E6%B4%BB%E4%B9%85%E8%A7%81/"/>
    
      <category term="原油" scheme="https://blog.cfz521.space/tags/%E5%8E%9F%E6%B2%B9/"/>
    
  </entry>
  
  <entry>
    <title>恶之华</title>
    <link href="https://blog.cfz521.space/posts/f24f4bb0.html"/>
    <id>https://blog.cfz521.space/posts/f24f4bb0.html</id>
    <published>2020-04-19T23:07:45.000Z</published>
    <updated>2020-04-20T01:32:56.177Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>人之立身，所贵者惟在德行，何必要论荣贵。</p><a id="more"></a><p>上周的大瓜非 <a href="https://s.weibo.com/weibo?q=%23%E5%A4%A9%E7%8C%AB%E6%80%BB%E8%A3%81%E5%A4%AB%E4%BA%BA%E5%96%8A%E8%AF%9D%E5%BC%A0%E5%A4%A7%E5%A5%95%23&from=default" target="_blank" rel="noopener external nofollow noreferrer">#天猫总裁夫人喊话张大奕#</a> 莫属了吧，不愧是国内首屈一指的公关互联网公司，个人、大 V 信息统统限流，当然马爸爸除外。此时此刻此情此景大明湖畔的东子，想起那时一波又一波的瓜，现在的大强子是不是留下了悔恨的泪水。当然，东子也是可恨的，不过也是<em><del>“可敬”</del></em>的，感谢砸一个“嫖客坑”，不然也不会让人逮着机会抄一把股票。所以，想来污点高管真是给广大韭菜送温暖呢，🤑。</p><h3 id="互联网并非……"><a href="#互联网并非……" class="headerlink" title="互联网并非……"></a>互联网并非……</h3><p>祖先老早前就在《史记》鸿门宴中的说过一句话，“人为刀俎，我为鱼肉”，话说樊哙有没想到，你为刀俎的同时也是食物链的一环？一如我们的职业平平凡凡，可是我们交出去的工作时推动了社会的进步，还是拉低了百姓的道德水准？杞人忧天，想想却也可怕。<br>对，喷的就是微博，食其屎，受其荫，没有节操毫无底线，金主爸爸一声令下，围其脖，扼其咽，真是吃相难看。也罢，这样的事情每天都在上演，天空有鸟飞过，也有粪落下；上至不可描述，下到一个电商卖家，要做庄家，就得学会控评，引舆论之水入私渠。你看的不一定是你想看到的，也不一定是你要看到的，也不一定是真要看到的！纵横捭阖，一如我们之于外围，处处送温暖，也落得个别有用心。是真是假，没人说得清。Story is made up by victor！车开的有点出轨了，古人云，“为川者，决之使导；为民者，宣之使言”，到如今呵呵哒，骑墙而过也要破三层裤子，<em><del>树人先生说，做人呢，最重要的时写好一撇一捺</del></em>。产品无善恶，刀剑随心动，人之性也善恶混，修其善则为善人，修其恶则为恶人。</p><h3 id="资本的力量🍋"><a href="#资本的力量🍋" class="headerlink" title="资本的力量🍋"></a>资本的力量🍋</h3><p>如今看来，大好前程似乎葬送了；善不积，不足以成名；恶不积，不足以灭身，还没来得及和黄峥一决高下就倒在了石榴裙下，美人椒房不敌路边小三，长使马云泪满襟。难道真的跟东子一样，脸盲分不出美丑，起码有些底线拎得清吧？想来阿里内部的各种 xx 委员会也该出动了吧，价值观成色几何一看便知。话说回到我们这些“小作坊”本身，其实也是事不关己，自扫门前雪，码自己的字，让 KPI 飞吧。<br>本人对于大部分的🍉不感兴趣，年纪一大把，鲜肉无福消；毕竟图个乐子的事情可以通过其他途径消遣替代，也感叹一句，青春的符号也慢慢在消失，比如稍早之前的渣科，比如这两天<a href="http://edu.163.com/20/0419/06/FAI9DFK700297VGM.html" target="_blank" rel="noopener external nofollow noreferrer">小新爸爸的配音演员去世</a>。再者，本身作为小人物，羡慕不来大佬们的风格，拼尽二百五十分的力气，原地杵在自己的小楼里也算是贪图个自在吧，只是对后面的这只看不见的手感到有些瑟瑟发抖，脊背发凉。这也不是一天两天了，一言不合，跨省牢饭；两语不顺，私权清沙。吾辈一贯之观点应是，私德之事不便多指指点点，纵使我大清自有国情在，做事得遵循基本法。言及于此，又想起《霸王别姬》里的那坤，真是活灵活现哪，精明、势力、墙头草，也不全是贬义，以一己之力能护住自己的一亩三分地，不随时代之洪荒冲走，也是能耐！最后的出场画面里，落难“霸王”不如鸡，慢悠悠来了一句，<kbd>要不然我给您提个醒</kbd>……<br><a href="https://imgchr.com/i/JM5eUg" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://s1.ax1x.com/2020/04/20/JM5eUg.md.jpg" alt="JM5eUg.md.jpg"></a></p><p>怕了，怕了，罢了，罢了，而今冲浪🏄‍最小心的是隐私，可是最不值钱的也是它了，🎈。</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;人之立身，所贵者惟在德行，何必要论荣贵。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
  </entry>
  
  <entry>
    <title>周总结（4/13~4/19）</title>
    <link href="https://blog.cfz521.space/posts/bbe1e55c.html"/>
    <id>https://blog.cfz521.space/posts/bbe1e55c.html</id>
    <published>2020-04-19T09:05:39.000Z</published>
    <updated>2020-05-06T02:26:12.288Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>说好了一辈子，少一年、一天、一个时辰，都不是一辈子。</p><a id="more"></a><h3 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h3><p>跑量 <code>27.36km</code>，上周看到韩寒的跑步成绩，本周也领略了一番 78 岁<a href="https://www.sohu.com/a/294830965_114731" target="_blank" rel="noopener external nofollow noreferrer">罗广德</a>老人的跑步经历，真·硬核跑步。生活似路上行，难免道阻且长，而我们要做的就是千方百计的继续走下去，“跑步年龄不是问题，主要是信念。”。嗯，风雨兼程，尤其是老爷子遗憾波马退赛，永远期待着下一站！<br><a href="https://imgchr.com/i/JK3cm4" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://s1.ax1x.com/2020/04/19/JK3cm4.md.jpg" alt="JK3cm4.md.jpg"></a></p><h3 id="理财"><a href="#理财" class="headerlink" title="理财"></a>理财</h3><p>平淡的一周，大 A 感觉总是忸忸怩怩放不开手脚，不如外围来的干脆啊，跌的时候装孙子，涨的时候成孙子。美帝急着复工因为有些人不工作真的会是饿死，因为他们大多钱不是在银行里，对比我🐇的数据，报复性存钱，大家看来也都是很慌了，收入下滑，有可能失业，所以复工后带来的效应不是报复性消费，羡慕有消费券发的童鞋，😤。</p><p><a href="https://www.jisilu.cn/data/indicator/" target="_blank" rel="noopener external nofollow noreferrer">A 股全市场温度计</a> 本周 PB 16.78，PE 20.98。</p><p><a href="https://qieman.com/portfolios/ZH035746/weekly-reports/00f1a2253361f9b7d71da2e13d91d9ef" target="_blank" rel="noopener external nofollow noreferrer">且慢组合</a> 本周五净值 1.2172，上涨 <font color="red">+2.00%</font>。4/14 市场小幅回调，买入一份 200 元，总投入 11,400，市值 11,571.38，累计收益率 <font color="red">1.50%</font>。</p><p>定投组合 本周为止本金 75902.15，市值 80408.35，今年来收益率 <font color="green">-3.75%</font>。</p><p>网格 本周为止本金 9677.04，总市值 9807.46，证券市值今年来累计盈亏 <font color="green">-49.60</font>。券商 ETF 买入一格后卖出一格，创业板 50 网格卖出两格，H 股 ETF 卖出一格，中概互联卖出一格。</p><h3 id="Summer"><a href="#Summer" class="headerlink" title="Summer"></a>Summer</h3><p>去了一趟本地的牡丹园，可惜封闭，从外面看牡丹花都开好了，真漂亮；今日<strong>谷雨</strong>，老天爷也是很应景，下了一场雨，空气清新，滴水凝珠绕芳草；植物园里已然花褪残红青杏小，山川黛色青，放风筝的时候到了。</p><p><a href="https://imgchr.com/i/JKUKu6" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://s1.ax1x.com/2020/04/19/JKUKu6.md.jpg" alt="JKUKu6.md.jpg"></a></p><p>周六补完了《<strong>霸王别姬</strong>》，怎么说呢，一声叹息袁四爷，一笑一啼哭惹人哀，从清末到民国、到国民到解放到大革命，个人如若抓不住历史的拐点，只能做一粒随波逐流的沙子，东西南北风，孤身叹伶仃。正好在公园里看到了一束花，诸葛菜可能性大些，也像是鸢尾花，花开荼蘼，花谢无言。49 还是 94年，傻傻分不清！</p><p><a href="https://imgchr.com/i/JKaCRA" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://s1.ax1x.com/2020/04/19/JKaCRA.md.jpg" alt="JKaCRA.md.jpg"></a></p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;说好了一辈子，少一年、一天、一个时辰，都不是一辈子。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
      <category term="数字生活" scheme="https://blog.cfz521.space/categories/essay/digital-life/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>戈多有信？</title>
    <link href="https://blog.cfz521.space/posts/ad8a647a.html"/>
    <id>https://blog.cfz521.space/posts/ad8a647a.html</id>
    <published>2020-04-15T10:42:23.000Z</published>
    <updated>2020-04-16T03:14:46.156Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>客途秋恨:<br>凉风有信，秋月无边，亏我思娇的情绪好比度日如年，虽然我不是玉树临风，潇洒倜傥，可是我有我广阔的胸襟，加强健的臂腕!<br>凉风有信，秋月无边，亏我思君的情绪好比度日如年，虽然我不是闭月羞花，沉鱼落雁，但我有广阔的胸襟与君共历悲欢!</p><a id="more"></a><p>这周还没结束就感觉有点丧，原本指望着能把显示器的部分费用给报销了，结果并没有，太傻，只怪自己被迷惑！彳亍口巴，首先感谢💻能给报销一部分，所以剩下的自己花💴动手提升办公幸福指数，配上购买的 NB 支架以及笔记本支架，桌面顿时感觉整洁了不少，线就懒得理了。真个屏幕还是真香的，后面带着一个USB 上行口以及两个数据口，通过上行口连接扩展坞的 USB 口，然后，屏幕后的两个 USB 就可以用了，比如连接有线键盘、移动硬盘、充电线等，下班的时候，笔记本一收就可以撤了，其他的键盘啥的不用插拔了。<del><em>可惜罗技没有机械键盘，暂时列入备选计划，入一个罗技蓝牙/无线的，要么入一个其他厂牌机械的</em></del>。嗯……写写，突然感觉有那么一点被治愈了呢🤦‍♂️。<br><a href="https://imgchr.com/i/JivGEd" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://s1.ax1x.com/2020/04/16/JivGEd.md.jpg" alt="JivGEd.md.jpg"></a></p><p>丧之二是因为调试设备的时候，需要一个无线路由，硬着头皮申请吧。为啥呢，就是类似童话的套路，<del>“你哭着对我说……（走错片场了）”</del> —— LONG LONG AGO…… THE END！大家也是心知肚明，公司的几个 AP 网络信号就是个战五渣青铜，幸还是不幸，用多了也就有了一种单身狗在家啃统一——啧啧，居然能凑合一顿，真·美好的一天，(￣▽￣)”。对于基层大部分人来说，两件事勉为其难：费用报销 & 申请物资，无他，耗神；麻雀虽小，部门俱全，手续也是够多，等待也是够磨人，时间是守恒的——省钱的功夫，无形中会耗费很多其他的资源。想来搞笑，一年前自己拿了一个废弃不用的 FAST 150M 路由，至今还是以前部门的主力🐓。中间过程简单说来就是 x 总->y 总->z 总->……->采购部，没办法，去了之后，大姐姐无心的一句话让我不爽了一下，“xx 的路由器是自己买的”，ㄟ( ▔, ▔ )ㄏ，“显示器已经不报销了，路由器还要我自己买吗”，心有不甘说了一句。后来，大家说起来，都知道网络不行，不在意的用 4G 流量，受不了的几个办公室自己采购的。可是还有很多不得不用无线的地方，这个问题从我入职伊始提过几次，虽然普罗米修斯式的不放弃，后来也就没那么积极了。现在的样子感觉成了一个鸡肋，玉米面蒸馒头 —— 当面子，我想大概是因为各位管事大佬的目之所及不是当下吧，活该员工受罪，看不到的扯皮很消耗人的动力；多投入几分改善下办公环境，让员工下班了也可以多在工位上噼里啪啦，也是很好的嘛，🐏。这两年成本的控制越来越严格了，或许是上市🍐大吧。</p><p>细细品一下，我觉得还是自己站得不够高 —— 即，实力没有强大到让其他人忽略不可的地步；你那微弱一光，不抵别人一闪。所以，没那么丧了，却有些懊恼了，没办法，带着这样的心情继续提升吧，不然谁会在意呢。哎呀呀，说多了，就有点酸了。朋友圈看到同事的插画，挺好：<br><a href="https://imgchr.com/i/JFVHmR" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://s1.ax1x.com/2020/04/16/JFVHmR.md.jpg" alt="JFVHmR.md.jpg"></a></p><p>BTW，写的发现了一个好的图片处理工具<a href="https://imagetoolkit.potatofield.cn/" target="_blank" rel="noopener external nofollow noreferrer">洋芋田图像工具箱</a>，支持加水印、拼长图、富文本制图、图片剪裁等 8 个常用功能。同时也知道，运营商已经开始支持 <a href="http://www.mipuo.com/6439.html" target="_blank" rel="noopener external nofollow noreferrer">IPV6</a> 公网地址了。</p><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;客途秋恨:&lt;br&gt;凉风有信，秋月无边，亏我思娇的情绪好比度日如年，虽然我不是玉树临风，潇洒倜傥，可是我有我广阔的胸襟，加强健的臂腕!&lt;br&gt;凉风有信，秋月无边，亏我思君的情绪好比度日如年，虽然我不是闭月羞花，沉鱼落雁，但我有广阔的胸襟与君共历悲欢!&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
    
      <category term="note" scheme="https://blog.cfz521.space/tags/note/"/>
    
  </entry>
  
  <entry>
    <title>周总结（4/6~4/12）</title>
    <link href="https://blog.cfz521.space/posts/391f48bb.html"/>
    <id>https://blog.cfz521.space/posts/391f48bb.html</id>
    <published>2020-04-12T04:26:57.000Z</published>
    <updated>2020-05-06T02:25:59.019Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --><html><head></head><body><p>巨人岿然不动，英雄遍体鳞伤！</p><a id="more"></a><h3 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h3><p>跑量 <code>27.13km</code>🏃‍♂️ ，本周看到 <a href="https://weibo.com/1191258123/ICoqvzeDz" target="_blank" rel="noopener external nofollow noreferrer">@韩寒</a> 晒出的 5km 成绩，哇，佩服，3’43’’ 的平均配速，真·亭林之光，😂！一通羡慕嫉妒恨的舔屏加口水之后，本菜也是蠢蠢欲动，第二天早起穿衣一气呵成，出门启动尝试了一下，4’38’’，还算满意——最大心率 179，平均心率 162，没敢使劲往上怼，似乎每天做点平板支撑还是很有效果的，💪。</p><h3 id="理财"><a href="#理财" class="headerlink" title="理财"></a>理财</h3><p><strong>外围向好不敢跌，都去过节放开绿！</strong> 我大 A 开始秀了，╮(╯▽╰)╭。看到石油已经达成减产协议了，总算有点利好了，不过谨记预期一致就是利空，利好出尽也是利空。作为个人，不管心动还是幡动，按计划行事，克己复礼，老老实实修行自己，做好自己的事情，不沾黄赌毒，好好经营“家”公司，否则就是自己的雷自己埋，数个一二三到时准炸飞，不是不报，只等众人抱薪，典型的就是这周的新闻——<a href="https://3g.163.com/news/article_cambrian/F9T6703I00019B3E.html" target="_blank" rel="noopener external nofollow noreferrer">高管被指性侵未成年养女</a>。</p><p>本周来看，医疗方面呈现强势之态，这一周似乎没了题材轮动的火热之势，资金抱团趋势明显，使劲往医药、消费挤，比如一日售罄的易方达消费基金，<strong>“拥挤的地方不要去……但凡爆款出现，至少预示阶段顶部”</strong>。另外，央妈金山放水的结果就是把余额宝收益率降至 2%，这也算是个热搜了。所以，年前来看，4% 的年金险还是很不错的；现阶段，风险敏感人群配置写银行理财或者短债之类的债券基金也算是收益过得去。</p><p><a href="https://www.jisilu.cn/data/indicator/" target="_blank" rel="noopener external nofollow noreferrer">A 股全市场温度计</a> 本周 PB 15.7，PE 19.29。</p><p><a href="https://qieman.com/portfolios/ZH035746/weekly-reports/205f80c522761d20aab8cc0ee9430c96" target="_blank" rel="noopener external nofollow noreferrer">且慢组合</a> 本周五净值 1.1934，上涨 <font color="red">+1.95%</font>。本周基于上涨以及港股休市的原因，无操作，总投入 11,200，市值 11,145.21，累计收益率 <font color="green">-0.49%</font>。</p><p>定投组合 本周为止本金 75852.11，市值 79515.09，今年来收益率 <font color="green">-4.71%</font>。</p><p>网格 本周为止本金 9677.04，总市值 9589.77，证券市值今年来累计盈亏 <font color="green">-256.05</font>。4/9 券商 ETF 卖出一格，重启创业板 50 网格。</p><h3 id="话外音"><a href="#话外音" class="headerlink" title="话外音"></a>话外音</h3><p>疫情还未到缓解之际，本周本市发现一例无症状感染者，路漫漫等开学的小阳已经快要无聊死了，好在每天都有计划，该干的事情还是有条不紊，虽然还是空闲的时候多。春来万物生，茅庐似三九，停暖的日子只能靠空调了。</p><p>最近这两年越来越觉得，科学没有国界，但是xxx……总觉得最后的结果就是类似移动网——<del>王中王</del>ˋ( ° ▽、° ) ，网中网。比如，因为金毛制裁的原因，<kbd>gayHub</kbd> 等科技公司会把来自伊朗、三月半之类的开发者账号禁用，也是迷。再到之前的菊厂也是由于“股沟”遵守“毛衣”禁令原因，被逼打造出了自己的应用商店。我们常说同气连枝，可是打架的时候，又得鼓励自己自强不息，天下之势早在那个纷乱的演义中，被说的一清二楚。</p><p>工作方面，例行季度述职，感觉会议越多越累，凡事都得拉会议、开钉钉协调。本周还莫名其妙的来了一次胃疼，从傍晚到睡觉没消停，有种年龄越大，身体越来越遭不住了的感觉，😢，所以暂时没有继续吃钙片。继续研究流媒体中，整合手头的资源，总算是能把摄像头推流了，还是得感叹一句，自己摸索真难，一山还有一山高，有时候情不自禁会感觉明明爬得不高，转头却发现连个商量的人都没了！陪着小阳去了趟书店，冷冷清清，是真冷也真冷，新华的价格还是那么高高在上啊。</p><p>感觉最近消费有点多啊，去一次超市就得二三百起步，开源节流。头次发现，“并夕夕”的月卡也是真香的呀，无门槛的券我估计就是套路拉新了，抢是不可能抢得到的。一通操作之后，NB 的 F80 显示器支架低于狗东很多的价格入手，开心o(<em>￣▽￣</em>)ブ。话说到显示器，27 寸的 4K 显示真是爽啊，可惜飞了不到一天，打开 VSCode 的时候，发现黑色背景有一块白色的印记，嗯，擦不掉，（＞人＜；）！无奈换货，又是一番折腾，待周一吧。另外，入手了张大妈上的站🔪一把，切菜也是倍儿爽，🤸‍♀️。</p><p>昨晚看了一部电影，嗯，开篇的那句话是对这个感悟，推荐大家看一下，《<a href="https://movie.douban.com/subject/30331959/" target="_blank" rel="noopener external nofollow noreferrer">黑水 Dark Waters</a>》，里面还有<strong>安迪</strong>。</p><blockquote><p>我对人类感到悲观，因为它对于自己的利益太过精明。我们对待自然的办法是打击并使之屈服。如果我们不是这样的多疑和专横，如果我们能调整好与这颗行星的关系，并深怀感激之心对待它，我们本可有更好的存活机会。—— 埃尔文·布鲁克斯·怀特</p></blockquote><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:14 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;巨人岿然不动，英雄遍体鳞伤！&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://blog.cfz521.space/categories/essay/"/>
    
      <category term="数字生活" scheme="https://blog.cfz521.space/categories/essay/digital-life/"/>
    
    
      <category term="总结" scheme="https://blog.cfz521.space/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Android USB 摄像头 RTMP 推流</title>
    <link href="https://blog.cfz521.space/posts/4bac1117.html"/>
    <id>https://blog.cfz521.space/posts/4bac1117.html</id>
    <published>2020-04-11T02:24:59.000Z</published>
    <updated>2020-04-14T04:21:26.332Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --><html><head></head><body><p>对这一段时间来，一直调查的方向做个总结。</p><a id="more"></a><h4 id="UVC-Camera"><a href="#UVC-Camera" class="headerlink" title="UVC Camera"></a>UVC Camera</h4><p>Android 设备要连接 USB 外置摄像头，需要对接 <code>UVC</code> 协议，这方面，大多数推荐的库为 <a href="https://github.com/saki4510t/UVCCamera" target="_blank" rel="noopener external nofollow noreferrer"><code>saki4510t/UVCCamera</code></a>。绝大多数的第三方库都基于此库进行修改、完善和封装。</p><blockquote><p>百度百科：UVC全称为 USB Video Class，即：USB视频类，是一种为USB视频捕获设备定义的协议标准。是Microsoft与另外几家设备厂商联合推出的为USB视频捕获设备定义的协议标准，已成为USB org标准之一。</p></blockquote><h4 id="RTMP"><a href="#RTMP" class="headerlink" title="RTMP"></a>RTMP</h4><p>通用的流程一般就是调用 <kbd>Camera/Camera2</kbd> 以及麦克风进行音视频采集之后合成推流 <a href="#refer-anchor"><sup>1</sup></a>：</p><div id="flowchart-0" class="flow-chart"></div><p>Android 上支持流媒体解析或推流的库主要有以下几个：</p><ul><li><a href="https://github.com/begeekmyfriend/yasea" target="_blank" rel="noopener external nofollow noreferrer">yasea</a><ul><li>纯 Java 编译</li><li>不支持 UVC</li></ul></li><li><a href="https://github.com/tsingsee/EasyRTMP" target="_blank" rel="noopener external nofollow noreferrer">EasyRTMP</a><ul><li>平台支持：Windows、Linux、ARM(各种交叉编译工具链)、Android、iOS</li><li>支持 UVC</li><li>收费</li></ul></li><li><a href="https://github.com/pedroSG94/rtmp-rtsp-stream-client-java" target="_blank" rel="noopener external nofollow noreferrer">rtmp-rtsp-stream-client-java</a><ul><li>支持 RTMP、RTSP</li><li>Java 编写</li><li>不支持 UVC</li></ul></li><li>Native - 通过 JNI 调用 C++，不支持 UVC<ul><li>librtmp/RTMPDump，参考 <a href="#refer-anchor"><sup>1</sup></a></li><li>ffmpeg，参考 <a href="#refer-anchor"><sup>2</sup></a></li></ul></li><li><a href="https://github.com/jiangdongguo/AndroidUSBCamera" target="_blank" rel="noopener external nofollow noreferrer">AndroidUSBCamera</a><ul><li>基于 <code>saki4510t</code></li><li>USB 摄像头 (UVC) 视频录制和图片抓拍，支持边推流边录像</li><li>需手动适配设备本身的 Camera</li></ul></li><li><a href="https://github.com/bytedeco/javacv/" target="_blank" rel="noopener external nofollow noreferrer">JavaCV</a><ul><li>用 JNI 封装了OpenCV，FFmpeg，libdc1394，PGR FlyCapture，OpenKinect，librealsense，CL PS3 Eye Driverx，videoInput，ARToolKitPlus以及flandmark 等的接口，从而为 Java 操作提供便捷方式</li><li>全平台支持 RTMP、RTSP</li><li>因为有 opencv，所以可以做图像处理方面的工作</li><li>不支持 UVC</li></ul></li><li>其他SDK<ul><li><a href="https://www.daniulive.com/" target="_blank" rel="noopener external nofollow noreferrer">大牛直播 SDK</a></li><li>金山云等</li></ul></li></ul><p>所以，综上考虑一下，采用 <kbd>AndroidUSBCamera</kbd>+<kbd>JavaCV</kbd>是一个很好的方式，一个负责画面展示，一个负责音频以及数据解析：<br>本身 <code>AndroidUSBCamera</code> 提供预览接口，所以我们可以设置变量在录制时通过 <code>setOnPreviewFrameListener</code> 处理传来的视频 <code>nv21</code> 信息；而 <code>JavaCV</code> 则可以处理音频数据，然后借助 <code>ffmpeg</code> 合成推流。主要参考就是示例工程中的 <code>RecordActivity</code> <a href="#refer-anchor"><sup>3</sup></a>。</p><h4 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h4><h5 id="AndroidUSBCamera"><a href="#AndroidUSBCamera" class="headerlink" title="AndroidUSBCamera"></a>AndroidUSBCamera</h5><p>这个 <code>saki4510t UVCCamera</code> 的依赖库最好还是直接下载 <code>aar</code> 和 <code>jar</code> 更快一些，也避免一些编译错误。</p><h5 id="JavaCV"><a href="#JavaCV" class="headerlink" title="JavaCV"></a>JavaCV</h5><p>因为是全平台的，所以最好删减一下，但是在使用过程中，会爆出 <code>couldn't find "libjniavutil.so"</code> <a href="#refer-anchor"><sup>5</sup></a> 的错误，我这边的解决方式为：</p><figure class="highlight gradle"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ndk {</span><br><span class="line">    abiFilters <span class="string">'armeabi-v7a'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.bytedeco'</span>, name: <span class="string">'javacv'</span>, version: <span class="string">'1.4.4'</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.bytedeco.javacpp-presets'</span>, name: <span class="string">'opencv'</span>, version: <span class="string">'4.0.1-1.4.4'</span>, classifier: <span class="string">'android-arm'</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.bytedeco.javacpp-presets'</span>, name: <span class="string">'opencv'</span>, version: <span class="string">'4.0.1-1.4.4'</span>, classifier: <span class="string">'android-arm64'</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.bytedeco.javacpp-presets'</span>, name: <span class="string">'ffmpeg'</span>, version: <span class="string">'4.1-1.4.4'</span>, classifier: <span class="string">'android-arm'</span></span><br><span class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'org.bytedeco.javacpp-presets'</span>, name: <span class="string">'ffmpeg'</span>, version: <span class="string">'4.1-1.4.4'</span>, classifier: <span class="string">'android-arm64'</span></span><br></pre></td></tr></tbody></table></figure><h4 id="测试服务器"><a href="#测试服务器" class="headerlink" title="测试服务器"></a>测试服务器</h4><ul><li><a href="https://github.com/ossrs/srs#usage" target="_blank" rel="noopener external nofollow noreferrer">OSSRS SRS</a> - 支持 RTMP/HLS/WebRTC/SRT/GB28181</li><li><a href="https://github.com/illuspas/nginx-rtmp-win32" target="_blank" rel="noopener external nofollow noreferrer">nginx-rtmp-win32</a> - Windows 下开箱即用，比较简单</li><li><a href="https://github.com/illuspas/Node-Media-Server" target="_blank" rel="noopener external nofollow noreferrer">Node-Media-Server</a> + <code>flvjs</code></li></ul><h4 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h4><p>这里需要对 <code>ffmpeg</code> 的参数有所了解，通过一些控制参数来降低推流的延迟<a href="#refer-anchor"><sup>7</sup></a>：</p><ul><li>关闭 sync-lookahead</li><li>降低 rc-lookahead，但别小于 10,默认是 -1</li><li>降低 threads(比如从 12 降到 6)</li><li>禁用 rc-lookahead</li><li>禁用 b-frames</li><li>缩小 GOP</li><li>开启 x264 的 -preset fast/faster/verfast/superfast/ultrafast 参数</li><li>使用 -tune zerolatency 参数</li></ul><p>具体到 <code>JavaCV</code> 代码中<a href="#refer-anchor"><sup>9</sup></a>：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FFmpegFrameRecorder(String filename, int imageWidth, int imageHeight,</span></span><br><span class="line"><span class="comment">// int audioChannels) fileName可以是本地文件（会自动创建），也可以是RTMP路径（发布到流媒体服务器）</span></span><br><span class="line"><span class="comment">// imageWidth = width （为捕获器设置宽） imageHeight = height （为捕获器设置高）</span></span><br><span class="line"><span class="comment">// audioChannels = 2（立体声）；1（单声道）；0（无音频）</span></span><br><span class="line">recorder = <span class="keyword">new</span> FFmpegFrameRecorder(ffmpeg_link, imageWidth, imageHeight, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该参数用于降低延迟 参考FFMPEG官方文档：https://trac.ffmpeg.org/wiki/StreamingGuide</span></span><br><span class="line"><span class="comment">// 官方原文参考：ffmpeg -f dshow -i video="Virtual-Camera" -vcodec libx264</span></span><br><span class="line"><span class="comment">// -tune zerolatency -b 900k -f mpegts udp://10.1.0.102:1234</span></span><br><span class="line">recorder.setVideoOption(<span class="string">"tune"</span>, <span class="string">"zerolatency"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 权衡quality(视频质量)和encode speed(编码速度) values(值)：</span></span><br><span class="line"><span class="comment">// ultrafast(终极快),superfast(超级快), veryfast(非常快), faster(很快), fast(快),</span></span><br><span class="line"><span class="comment">// medium(中等), slow(慢), slower(很慢), veryslow(非常慢)</span></span><br><span class="line"><span class="comment">// ultrafast(终极快)提供最少的压缩（低编码器CPU）和最大的视频流大小；而veryslow(非常慢)提供最佳的压缩（高编码器CPU）的同时降低视频流的大小</span></span><br><span class="line"><span class="comment">// 参考：https://trac.ffmpeg.org/wiki/Encode/H.264 官方原文参考：-preset ultrafast</span></span><br><span class="line"><span class="comment">// as the name implies provides for the fastest possible encoding. If</span></span><br><span class="line"><span class="comment">// some tradeoff between quality and encode speed, go for the speed.</span></span><br><span class="line"><span class="comment">// This might be needed if you are going to be transcoding multiple</span></span><br><span class="line"><span class="comment">// streams on one machine.</span></span><br><span class="line">recorder.setVideoOption(<span class="string">"preset"</span>, <span class="string">"ultrafast"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参考转流命令: ffmpeg</span></span><br><span class="line"><span class="comment">// -i'udp://localhost:5000?fifo_size=1000000&overrun_nonfatal=1' -crf 30</span></span><br><span class="line"><span class="comment">// -preset ultrafast -acodec aac -strict experimental -ar 44100 -ac</span></span><br><span class="line"><span class="comment">// 2-b:a 96k -vcodec libx264 -r 25 -b:v 500k -f flv 'rtmp://wowza</span></span><br><span class="line"><span class="comment">// serverIP/live/cam0' -crf 30</span></span><br><span class="line"><span class="comment">// -设置内容速率因子,这是一个x264的动态比特率参数，它能够在复杂场景下(使用不同比特率，即可变比特率)保持视频质量；</span></span><br><span class="line"><span class="comment">// 可以设置更低的质量(quality)和比特率(bit rate),参考Encode/H.264 -preset ultrafast</span></span><br><span class="line"><span class="comment">// -参考上面preset参数，与视频压缩率(视频大小)和速度有关,需要根据情况平衡两大点：压缩率(视频大小)，编/解码速度 -acodec</span></span><br><span class="line"><span class="comment">// aac -设置音频编/解码器 (内部AAC编码) -strict experimental</span></span><br><span class="line"><span class="comment">// -允许使用一些实验的编解码器(比如上面的内部AAC属于实验编解码器) -ar 44100 设置音频采样率(audio sample</span></span><br><span class="line"><span class="comment">// rate) -ac 2 指定双通道音频(即立体声) -b:a 96k 设置音频比特率(bit rate) -vcodec libx264</span></span><br><span class="line"><span class="comment">// 设置视频编解码器(codec) -r 25 -设置帧率(frame rate) -b:v 500k -设置视频比特率(bit</span></span><br><span class="line"><span class="comment">// rate),比特率越高视频越清晰,视频体积也会变大,需要根据实际选择合理范围 -f flv</span></span><br><span class="line"><span class="comment">// -提供输出流封装格式(rtmp协议只支持flv封装格式) 'rtmp://FMS server</span></span><br><span class="line"><span class="comment">// IP/live/cam0'-流媒体服务器地址</span></span><br><span class="line">recorder.setVideoOption(<span class="string">"crf"</span>, <span class="string">"25"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2000 kb/s, 720P视频的合理比特率范围</span></span><br><span class="line">recorder.setVideoBitrate(<span class="number">2000000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 音频比特率</span></span><br><span class="line"><span class="comment">//recorder.setAudioBitrate(192000);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 最高质量</span></span><br><span class="line"><span class="comment">//recorder.setAudioQuality(0);</span></span><br><span class="line">recorder.setSampleRate(sampleAudioRateInHz);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 双通道(立体声) -- 注意：立体声和单声道处理方法不一样</span></span><br><span class="line"><span class="comment">// recorder.setAudioChannels(2);</span></span><br></pre></td></tr></tbody></table></figure><h4 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h4><p>从前年直播答题开始的预热，到去年抖音、快手的直播、连麦、短视频、KOL 带货等的推动，加之现在疫情期间在线授课、远程工作的加持，借助 4/5G 网络，这算是当前一直很火热的领域了；以前觉得集成集成一个就行，而现在用户经过培育之后，体验方面要求也越来越高，稳定性、安全性更不用说了，真是需要积累的。这也算是一种倒逼吧。<br>经过这段时间的摸索，感觉流媒体技术方面是个很大的“坑”——网上的资料大部分都是初级的入门教程，却没有一个深入的讲解，绝大部分不能用于生产环境。除去说的资源和教程少，单单拿出的细分领域也多，而协议更多，比如 RTMP、RTSP、HLS、webRTC……以及还要对各家的摄像头和 NVR 的对接要做的了然于胸。深深感觉到自己的菜，自研的话技术壁垒确实高，入门曲线特别抖，核心代码一般都是 C++，而且还要交叉编译到各个平台，😵。而借助开源库虽然可以实现一些功能，但是要改动的话还是要对一些库做功课，这个不是一朝一夕的功夫，如果有个带头大哥真是再好不过。</p><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><div id="refer-anchor"></div><ul><li>[1] <a href="https://www.cnblogs.com/haibindev/p/8989218.html" target="_blank" rel="noopener external nofollow noreferrer">NDK C++开发Android端RTMP直播推流程序</a></li><li>[2] <a href="https://www.jishudog.com/9074/html" target="_blank" rel="noopener external nofollow noreferrer">Android基于FFmpeg进行RTMP推流</a>、<a href="https://www.jianshu.com/nb/17697147" target="_blank" rel="noopener external nofollow noreferrer">音频编码</a></li><li>[3] <a href="https://github.com/bytedeco/sample-projects" target="_blank" rel="noopener external nofollow noreferrer">JavaCV 示例工程</a></li><li>[4] <a href="https://blog.csdn.net/weixin_42105345/article/details/80169695" target="_blank" rel="noopener external nofollow noreferrer">JavaCV实现音视频混合推送(录制)到服务器(本地)</a></li><li>[5] <a href="https://sq.163yun.com/blog/article/214094674042236928" target="_blank" rel="noopener external nofollow noreferrer">JavaCV在Android中的应用</a></li><li>[6] <a href="https://blog.csdn.net/sun8532685/article/details/96105884" target="_blank" rel="noopener external nofollow noreferrer">Android视频采集实时推送RTP/RTSP/RTMP</a></li><li>[7] <a href="https://blog.csdn.net/fireroll/article/details/51902018" target="_blank" rel="noopener external nofollow noreferrer">ffmpeg的转码延时测试与设置优化</a></li><li>[8] <a href="https://juejin.im/post/5e8e714f6fb9a03c832b089c" target="_blank" rel="noopener external nofollow noreferrer">Electron 低延迟视频流播放方案探索</a></li><li>[9] <a href="https://blog.csdn.net/weixin_42105345/article/details/80169695" target="_blank" rel="noopener external nofollow noreferrer">JavaCV实现音视频混合推送(录制)到服务器(本地)</a><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display:none">s=>start: Camera/Camera2av=>condition: 音视频v1=>operation: 视频 H264 编码vcond=>condition: 硬/软 编码v2=>operation: Android MediaCodecv3=>operation: x264 软编码a1=>operation: 音频麦克风采集rtmp=>operation: NDK RTMPe=>end: 音视频合成推流s->av(right)av(yes)->v1(right)->vcondav(no,bottom)->a1vcond(yes)->v2vcond(no)->v3v2->rtmpv3->rtmpa1->rtmprtmp->e</textarea><textarea id="flowchart-0-options" style="display:none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>var code=document.getElementById("flowchart-0-code").value,options=JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)),diagram=flowchart.parse(code);diagram.drawSVG("flowchart-0",options)</script></li></ul><!-- rebuild by neat --></body></html>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri May 29 2020 16:56:15 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;对这一段时间来，一直调查的方向做个总结。&lt;/p&gt;
    
    </summary>
    
    
      <category term="教程" scheme="https://blog.cfz521.space/categories/tutorials/"/>
    
      <category term="数字生活" scheme="https://blog.cfz521.space/categories/tutorials/digital-life/"/>
    
    
      <category term="Android" scheme="https://blog.cfz521.space/tags/Android/"/>
    
      <category term="UVC" scheme="https://blog.cfz521.space/tags/UVC/"/>
    
      <category term="RTMP" scheme="https://blog.cfz521.space/tags/RTMP/"/>
    
      <category term="USB Camera" scheme="https://blog.cfz521.space/tags/USB-Camera/"/>
    
  </entry>
  
</feed>
